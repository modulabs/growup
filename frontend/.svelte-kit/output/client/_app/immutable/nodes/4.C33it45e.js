import{a as v,f as _,c as Le}from"../chunks/_V9dK3ok.js";import{o as pr}from"../chunks/1hPTKaIJ.js";import{l as br,an as fr,ai as gr,a0 as xr,ao as _r,ap as mr,n as et,o as yr,p as hr,b as u,d as V,f as pe,t as D,g as e,a as wr,e as o,c as s,s as l,h as qt,q as tt,r}from"../chunks/CcVkWGgp.js";import{d as Sr,s as x,e as $r}from"../chunks/Dap9sqf4.js";import{i as N}from"../chunks/BSGnc2-w.js";import{e as H,i as J}from"../chunks/GjfVCmik.js";import{a as k,r as G,s as rt,c as kr}from"../chunks/By8uYFO7.js";import{s as at}from"../chunks/CWDCDM9S.js";import{b as W}from"../chunks/CZzPbpj5.js";import{s as Lr,a as Mr}from"../chunks/Dn1l8nLM.js";import{p as Tr}from"../chunks/DGU4Tyla.js";import{g as st}from"../chunks/Bx5Z5evO.js";import{b as ot}from"../chunks/CoslMBWp.js";import{a as Q}from"../chunks/BganUsAT.js";import{i as qr}from"../chunks/3jTL0Oy-.js";import{Q as Cr}from"../chunks/DqiXTygU.js";import{L as Dr}from"../chunks/C0NRKcx4.js";function Ct(c,T,X=!1){if(c.multiple){if(T==null)return;if(!xr(T))return _r();for(var O of c.options)O.selected=T.includes(be(O));return}for(O of c.options){var Y=be(O);if(mr(Y,T)){O.selected=!0;return}}(!X||T!==void 0)&&(c.selectedIndex=-1)}function Nr(c){var T=new MutationObserver(()=>{Ct(c,c.__value)});T.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),gr(()=>{T.disconnect()})}function lt(c,T,X=T){var O=new WeakSet,Y=!0;br(c,"change",R=>{var j=R?"[selected]":":checked",h;if(c.multiple)h=[].map.call(c.querySelectorAll(j),be);else{var ee=c.querySelector(j)??c.querySelector("option:not([disabled])");h=ee&&be(ee)}X(h),et!==null&&O.add(et)}),fr(()=>{var R=T();if(c===document.activeElement){var j=yr??et;if(O.has(j))return}if(Ct(c,R,Y),Y&&R===void 0){var h=c.querySelector(":checked");h!==null&&(R=be(h),X(R))}c.__value=R,Y=!1}),Nr(c)}function be(c){return"__value"in c?c.__value:c.value}var Er=_('<th class="px-1 py-1 text-center min-w-[120px] border-r border-b border-gray-300"><div class="flex flex-col items-center gap-1"><button class="text-xs font-semibold text-gray-700 hover:text-blue-700 cursor-pointer"> </button></div></th>'),Ir=_('<tr><td class="px-3 py-6 text-center text-gray-500">ì ìˆ˜í‘œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</td></tr>'),Qr=_('<tr><td class="px-3 py-6 text-center text-gray-500">ì—´ ë + ë²„íŠ¼ìœ¼ë¡œ í€˜ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</td></tr>'),Rr=_('<span class="absolute right-1 bottom-0.5 text-[9px] text-blue-500">ì €ì¥</span>'),zr=_('<span class="absolute right-1 bottom-0.5 text-[9px] text-red-500">ì‹¤íŒ¨</span>'),Br=_('<td class="p-0 border-r border-gray-200 group"><div class="relative flex items-center justify-center gap-0.5 h-7"><input type="text" inputmode="decimal" placeholder="ì…ë ¥"/> <span class="absolute right-1 top-1 h-1 w-1 rounded-full bg-gray-300 group-hover:bg-blue-400"></span> <!></div></td>'),Or=_('<tr class="border-b border-gray-300 hover:bg-gray-50/70"><td class="sticky left-0 z-10 bg-white px-2 py-1 font-medium text-gray-800 border-r border-gray-300"><button class="text-left hover:text-blue-700 cursor-pointer truncate max-w-[150px] leading-tight"> </button></td><!><td class="p-0"></td></tr>'),Ur=_("<option> </option>"),jr=_("<option> </option>"),Ar=_('<input type="text" placeholder="ì¹´í…Œê³ ë¦¬ ì…ë ¥" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>'),Pr=_('<div class="text-center py-8 text-gray-400 text-sm bg-white rounded-lg border border-gray-200">ë¶€ì—¬ëœ ë¹„ì •ê·œ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>'),Gr=_('<tr class="hover:bg-gray-50"><td class="px-3 py-2 font-medium text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-center font-bold text-green-600"> </td><td class="px-3 py-2 text-xs text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-gray-600 max-w-full lg:max-w-[100px] truncate"> </td><td class="px-3 py-2 text-center"><button class="text-red-400 hover:text-red-600 cursor-pointer text-xs">ì‚­ì œ</button></td></tr>'),Kr=_('<div class="bg-white rounded-lg border border-gray-200 overflow-hidden"><div class="max-h-[360px] overflow-y-auto"><table class="w-full text-sm"><thead class="bg-gray-50 sticky top-0"><tr><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">í•™ìƒ</th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500">ì ìˆ˜</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì¹´í…Œê³ ë¦¬</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì‚¬ìœ </th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500 w-10"></th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div></div>'),Fr=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-4"> </h2> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">í€˜ìŠ¤íŠ¸ ë²ˆí˜¸</label> <input type="number" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ìœ í˜•</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>ì„œë¸Œí€˜ìŠ¤íŠ¸ (0~1)</option><option>ë©”ì¸í€˜ìŠ¤íŠ¸ (0~5)</option><option>ë°ì´í„°í†¤ (0~10)</option><option>ì•„ì´ë””ì–´í†¤ (0~20)</option></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì œëª© (ì„ íƒ)</label> <input type="text" placeholder="ì˜ˆ: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ì´ˆ" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer">ì·¨ì†Œ</button> <button type="submit" class="flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:opacity-50 cursor-pointer"> </button></div></form></div></div>'),Vr=_("<li> </li>"),Wr=_('<div class="mt-2 pt-2 border-t border-yellow-200"><p class="text-xs font-medium text-yellow-700 mb-1"> </p> <ul class="text-xs text-yellow-600 space-y-0.5 max-h-24 overflow-y-auto"></ul></div>'),Yr=_('<div><p>ê°€ì ¸ì˜¤ê¸° ê²°ê³¼</p> <div class="grid grid-cols-2 gap-1 text-xs"><span class="text-gray-600">í€˜ìŠ¤íŠ¸ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">í€˜ìŠ¤íŠ¸ ê°±ì‹ :</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ê°±ì‹ :</span> <span class="font-medium"> </span></div> <!></div>'),Zr=_('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-1">ğŸ“¥ ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</h2> <p class="text-xs text-gray-500 mb-4">Google ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì˜ "í€˜ìŠ¤íŠ¸" ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ëª©ë¡ê³¼ ì ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” ID</label> <input type="text" placeholder="https://docs.google.com/spreadsheets/d/... ë˜ëŠ” ID" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì‹œíŠ¸ ì´ë¦„</label> <input type="text" placeholder="í€˜ìŠ¤íŠ¸" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/> <p class="text-xs text-gray-400 mt-1">ê¸°ë³¸ê°’: "í€˜ìŠ¤íŠ¸"</p></div> <!> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer"> </button> <button type="button" class="flex-1 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 cursor-pointer"> </button></div></div></div></div>'),Hr=_('<div class="max-w-[1600px] mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><button class="text-sm text-blue-600 hover:text-blue-800 mb-2 cursor-pointer">â† ê³¼ì • ëª©ë¡</button> <h1 class="text-2xl font-bold text-gray-800">í€˜ìŠ¤íŠ¸ ê´€ë¦¬</h1></div> <div class="space-y-6"><div class="flex-1 min-w-0"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4"><h2 class="text-lg font-semibold text-gray-700">í•™ìƒ x í€˜ìŠ¤íŠ¸ ì ìˆ˜í‘œ</h2> <div class="flex flex-col sm:flex-row gap-2"><button class="px-3 py-2 text-sm border border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-colors cursor-pointer">ğŸ“¥ ì‹œíŠ¸ì—ì„œ ê°€ì ¸ì˜¤ê¸°</button> <button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer">+ í€˜ìŠ¤íŠ¸ ì¶”ê°€</button></div></div> <div class="border border-gray-300 bg-white overflow-hidden mb-3"><div class="overflow-auto"><table class="w-full min-w-[980px] text-sm border-collapse"><thead class="bg-gray-100"><tr><th class="sticky left-0 z-10 bg-gray-100 px-2 py-1 text-left font-semibold text-gray-700 min-w-[160px] border-r border-b border-gray-300">í•™ìƒ</th><!><th class="px-1 py-1 text-center min-w-[60px] border-b border-gray-300"><button class="w-8 h-8 rounded-md border border-dashed border-gray-300 text-gray-500 hover:text-blue-600 hover:border-blue-400 cursor-pointer">+</button></th></tr></thead><tbody><!></tbody></table></div></div> <!></div> <div class="w-full"><h2 class="text-lg font-semibold text-gray-700 mb-4">ë¹„ì •ê·œ ì ìˆ˜ ê´€ë¦¬</h2> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 items-start"><div class="bg-white rounded-lg border border-gray-200 p-4"><h3 class="text-sm font-medium text-gray-700 mb-3">ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬</h3> <div class="space-y-3"><div><label class="block text-xs text-gray-500 mb-1">í•™ìƒ</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>í•™ìƒ ì„ íƒ</option><!></select></div> <div class="flex flex-col sm:flex-row gap-3"><div class="w-20"><label class="block text-xs text-gray-500 mb-1">ì ìˆ˜</label> <input type="number" step="0.5" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex-1 space-y-2"><div><label class="block text-xs text-gray-500 mb-1">ì¹´í…Œê³ ë¦¬</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div> <!> <div><input type="text" placeholder="ìƒì„¸ ì‚¬ìœ  (ì„ íƒ)" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <button class="w-full px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors cursor-pointer"> </button></div></div> <!></div></div> <!></div></div> <!> <!>',1);function fa(c,T){hr(T,!0);const X=()=>Mr(qr,"$isLoggedIn",O),[O,Y]=Lr();let R=u(!0),j=u(V([])),h=qt(()=>Tr.params.courseId),ee=u(!1),ae=u(V({}));const it=new Map;let te=qt(()=>[...e(j)].sort((t,a)=>t.quest_number-a.quest_number));function fe(t,a){return`${t}:${a}`}function K(t,a){return e(ae)[fe(t,a)]||{score:"",isSubmitted:!1,saving:!1,error:!1}}function ge(t,a,n){const i=fe(t,a);o(ae,{...e(ae),[i]:{...K(t,a),...n}},!0)}function Dt(t,a,n){if(!n||t.trim()==="")return"bg-slate-50 text-slate-500";const i=Number(t);return Number.isNaN(i)?"bg-slate-50 text-slate-500":a==="sub"?i<=0?"bg-red-50 text-red-700":i<.5?"bg-amber-50 text-amber-700":i<1?"bg-lime-50 text-lime-700":"bg-emerald-100 text-emerald-800":a==="main"?i<=0?"bg-red-50 text-red-700":i<2?"bg-orange-50 text-orange-700":i<3?"bg-amber-50 text-amber-700":i<4?"bg-lime-50 text-lime-700":i<5?"bg-emerald-50 text-emerald-700":"bg-indigo-100 text-indigo-800":a==="datathon"?i<=0?"bg-red-50 text-red-700":i<4?"bg-amber-50 text-amber-700":i<7?"bg-lime-50 text-lime-700":"bg-emerald-100 text-emerald-800":i<=0?"bg-red-50 text-red-700":i<8?"bg-amber-50 text-amber-700":i<14?"bg-lime-50 text-lime-700":"bg-emerald-100 text-emerald-800"}let se=u(!1),xe=u(!1),oe=u(1),le=u("main"),ie=u(""),ne=u(V(new Date().toISOString().split("T")[0])),Z=u(null),Nt=u(V(new Set)),Me=u(!1),de=u(""),_e=u("í€˜ìŠ¤íŠ¸"),me=u(!1),L=u(null),nt=u(V([])),ye=u(V([])),Et=u(V([])),Te=u(V([])),qe=u(!1),ue=u(null),ce=u(0),re=u("í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),he=u(""),we=u(""),Se=u(!1);const It=["í¼ì‹¤ì¬ëŸ‰ì ìˆ˜","ì•„ë‚Œì—†ì´ ì£¼ëŠ” ê·¸ë£¨","ë””ìŠ¤ì½”ë“œ ì†Œí†µì™•","ì‰ë°¸ê·¸íˆ¬","ì§ì ‘ ì…ë ¥"];pr(async()=>{if(!X()){st(`${ot}/login`);return}Q.post(`/api/v1/admin/sync/students/${e(h)}`).catch(()=>{}),await Ce(),await Qt(),await De(),await Ne()});async function Ce(){o(R,!0);try{o(j,await Q.get(`/api/v1/facilitator/courses/${e(h)}/quests`),!0),o(Nt,new Set,!0)}catch{k("í€˜ìŠ¤íŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(R,!1)}}async function Qt(){try{const[t,a]=await Promise.all([Q.get(`/api/v1/facilitator/courses/${e(h)}/students?active=true`),Q.get(`/api/v1/facilitator/courses/${e(h)}/students?active=false`)]);o(ye,t,!0),o(Et,a,!0),o(nt,t,!0)}catch{}}async function De(){if(e(te).length===0||e(ye).length===0){o(ae,{},!0);return}o(ee,!0);try{const t={};await Promise.all(e(te).map(async a=>{const n=await Q.get(`/api/v1/facilitator/quests/${a.id}/students`);for(const i of n)e(ye).find(d=>d.legacy_user_id===i.legacy_student_id)&&(t[fe(i.legacy_student_id,a.id)]={score:i.score===null?"":String(i.score),isSubmitted:i.is_submitted,saving:!1,error:!1})})),o(ae,t,!0)}catch{k("ì ìˆ˜ ë§¤íŠ¸ë¦­ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(ee,!1)}}function Rt(t,a,n){const i=n.trim();i!==""&&!/^\d+(\.\d+)?$/.test(i)||(ge(t,a.id,{score:i,isSubmitted:i!=="",error:!1}),zt(t,a.id,a.quest_type))}function zt(t,a,n){const i=fe(t,a),d=it.get(i);d&&clearTimeout(d),it.set(i,setTimeout(()=>{Bt(t,a)},450))}async function Bt(t,a,n){const i=K(t,a);ge(t,a,{saving:!0,error:!1});try{const d=i.score===""?null:Number(i.score);await Q.post(`/api/v1/facilitator/quests/${a}/scores`,{scores:[{legacy_student_id:t,score:d,is_submitted:d!==null}]}),ge(t,a,{saving:!1,error:!1,isSubmitted:d!==null})}catch{ge(t,a,{saving:!1,error:!0}),k("ì ìˆ˜ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}async function Ne(){o(qe,!0);try{o(Te,await Q.get(`/api/v1/facilitator/courses/${e(h)}/bonus-scores`),!0)}catch{k("ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(qe,!1)}}async function Ot(){let t=e(re);if(e(re)==="ì§ì ‘ ì…ë ¥"&&(t=e(he).trim()),!e(ue)||e(ce)<=0||!t){k("í•™ìƒ, ì ìˆ˜, ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(Se,!0);try{await Q.post(`/api/v1/facilitator/courses/${e(h)}/bonus-scores`,{legacy_student_id:e(ue),score:e(ce),category:t,reason:e(we).trim()}),k("ë¹„ì •ê·œ ì ìˆ˜ê°€ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success"),o(ue,null),o(ce,0),o(we,""),o(re,"í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),o(he,""),await Ne()}catch{k("ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(Se,!1)}}async function Ut(t){if(confirm("ì´ ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await Q.del(`/api/v1/facilitator/bonus-scores/${t}`),k("ë¹„ì •ê·œ ì ìˆ˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success"),await Ne()}catch{k("ë¹„ì •ê·œ ì ìˆ˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}function jt(t){const a=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9_-]+)/);return a?a[1]:t.trim()}function At(){o(de,""),o(_e,"í€˜ìŠ¤íŠ¸"),o(L,null),o(Me,!0)}async function Pt(){const t=jt(e(de));if(!t){k("ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(me,!0),o(L,null);try{const a=await Q.post(`/api/v1/facilitator/courses/${e(h)}/import-sheet`,{spreadsheet_id:t,sheet_name:e(_e).trim()||"í€˜ìŠ¤íŠ¸"});o(L,a,!0),k(`ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ: í€˜ìŠ¤íŠ¸ ${a.quests_created}ê°œ ìƒì„±, ${a.quests_updated}ê°œ ê°±ì‹  / ì ìˆ˜ ${a.scores_created}ê°œ ìƒì„±, ${a.scores_updated}ê°œ ê°±ì‹ `,a.errors.length>0?"error":"success"),await Ce(),await De()}catch{k("ì‹œíŠ¸ ê°€ì ¸ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(me,!1)}}function dt(){o(Z,null),o(oe,e(j).length>0?Math.max(...e(j).map(t=>t.quest_number))+1:1,!0),o(le,"main"),o(ie,""),o(ne,new Date().toISOString().split("T")[0],!0),o(se,!0)}function Gt(t){o(Z,t,!0),o(oe,t.quest_number,!0),o(le,t.quest_type,!0),o(ie,t.title||"",!0),o(ne,t.quest_date,!0),o(se,!0)}async function Kt(){o(xe,!0);try{const t={quest_number:e(oe),quest_type:e(le),title:e(ie).trim()||null,quest_date:e(ne)};e(Z)?(await Q.put(`/api/v1/facilitator/quests/${e(Z).id}`,t),k("í€˜ìŠ¤íŠ¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.","success")):(await Q.post(`/api/v1/facilitator/courses/${e(h)}/quests`,t),k("í€˜ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.","success")),o(se,!1),await Ce(),await De()}catch{k(e(Z)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.":"í€˜ìŠ¤íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(xe,!1)}}var ut=Hr(),Ee=pe(ut),Ie=s(Ee),Ft=s(Ie);Ft.__click=()=>st(`${ot}/facilitator`),tt(2),r(Ie);var ct=l(Ie,2),Qe=s(ct),Re=s(Qe),vt=l(s(Re),2),pt=s(vt);pt.__click=At;var Vt=l(pt,2);Vt.__click=dt,r(vt),r(Re);var ze=l(Re,2),bt=s(ze),ft=s(bt),Be=s(ft),gt=s(Be),xt=l(s(gt));H(xt,17,()=>e(te),J,(t,a)=>{var n=Er(),i=s(n),d=s(i);d.__click=()=>Gt(e(a));var p=s(d,!0);r(d),r(i),r(n),D(()=>x(p,e(a).title||`${Cr[e(a).quest_type]} #${e(a).quest_number}`)),v(t,n)});var _t=l(xt),Wt=s(_t);Wt.__click=dt,r(_t),r(gt),r(Be);var mt=l(Be),Yt=s(mt);{var Zt=t=>{var a=Ir(),n=s(a);r(a),D(()=>rt(n,"colspan",e(te).length+2)),v(t,a)},Ht=t=>{var a=Le(),n=pe(a);{var i=p=>{var b=Qr(),E=s(b);rt(E,"colspan",2),r(b),v(p,b)},d=p=>{var b=Le(),E=pe(b);H(E,17,()=>e(ye),J,(z,m)=>{var I=Or(),f=s(I),M=s(f);M.__click=()=>st(`${ot}/student/${e(h)}?student_id=${e(m).legacy_user_id}`);var q=s(M,!0);r(M),r(f);var A=l(f);H(A,17,()=>e(te),J,(y,g)=>{var C=Br(),B=s(C),w=s(B);G(w),w.__input=S=>Rt(e(m).legacy_user_id,e(g),S.currentTarget.value);var P=l(w,4);{var U=S=>{var F=Rr();v(S,F)},$=S=>{var F=Le(),ke=pe(F);{var We=ve=>{var Ye=zr();v(ve,Ye)};N(ke,ve=>{K(e(m).legacy_user_id,e(g).id).error&&ve(We)},!0)}v(S,F)};N(P,S=>{K(e(m).legacy_user_id,e(g).id).saving?S(U):S($,!1)})}r(B),r(C),D((S,F)=>{kr(w,S),at(w,1,F)},[()=>K(e(m).legacy_user_id,e(g).id).score,()=>`w-full h-7 px-1 py-0 text-center border-0 rounded-none text-xs font-semibold cursor-text transition-colors duration-100 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-300 focus:bg-white ${Dt(K(e(m).legacy_user_id,e(g).id).score,e(g).quest_type,K(e(m).legacy_user_id,e(g).id).isSubmitted)} ${K(e(m).legacy_user_id,e(g).id).error?"bg-red-100 text-red-800":""}`]),v(y,C)}),tt(),r(I),D(()=>x(q,e(m).name)),v(z,I)}),v(p,b)};N(n,p=>{e(te).length===0?p(i):p(d,!1)},!0)}v(t,a)};N(Yt,t=>{e(R)||e(ee)?t(Zt):t(Ht,!1)})}r(mt),r(ft),r(bt),r(ze);var Jt=l(ze,2);N(Jt,t=>{}),r(Qe);var Oe=l(Qe,2),yt=l(s(Oe),2),Ue=s(yt),ht=l(s(Ue),2),je=s(ht),Ae=l(s(je),2),Pe=s(Ae);Pe.value=(Pe.__value=null)??"";var Xt=l(Pe);H(Xt,17,()=>e(nt),J,(t,a)=>{var n=Ur(),i=s(n,!0);r(n);var d={};D(()=>{x(i,e(a).name),d!==(d=e(a).legacy_user_id)&&(n.value=(n.__value=e(a).legacy_user_id)??"")}),v(t,n)}),r(Ae),r(je);var Ge=l(je,2),Ke=s(Ge),wt=l(s(Ke),2);G(wt),r(Ke);var St=l(Ke,2),Fe=s(St),Ve=l(s(Fe),2);H(Ve,21,()=>It,J,(t,a)=>{var n=jr(),i=s(n,!0);r(n);var d={};D(()=>{x(i,e(a)),d!==(d=e(a))&&(n.value=(n.__value=e(a))??"")}),v(t,n)}),r(Ve),r(Fe);var $t=l(Fe,2);{var er=t=>{var a=Ar();G(a),W(a,()=>e(he),n=>o(he,n)),v(t,a)};N($t,t=>{e(re)==="ì§ì ‘ ì…ë ¥"&&t(er)})}var kt=l($t,2),Lt=s(kt);G(Lt),r(kt),r(St),r(Ge);var $e=l(Ge,2);$e.__click=Ot;var tr=s($e,!0);r($e),r(ht),r(Ue);var rr=l(Ue,2);{var ar=t=>{Dr(t,{type:"card",lines:3})},sr=t=>{var a=Le(),n=pe(a);{var i=p=>{var b=Pr();v(p,b)},d=p=>{var b=Kr(),E=s(b),z=s(E),m=l(s(z));H(m,21,()=>e(Te),J,(I,f)=>{var M=Gr(),q=s(M),A=s(q,!0);r(q);var y=l(q),g=s(y);r(y);var C=l(y),B=s(C,!0);r(C);var w=l(C),P=s(w,!0);r(w);var U=l(w),$=s(U);$.__click=()=>Ut(e(f).id),r(U),r(M),D(S=>{rt(M,"title",`${e(f).given_by_name??""} Â· ${S??""}`),x(A,e(f).student_name),x(g,`+${e(f).score??""}`),x(B,e(f).category),x(P,e(f).reason)},[()=>new Date(e(f).given_at).toLocaleDateString("ko-KR")]),v(I,M)}),r(m),r(z),r(E),r(b),v(p,b)};N(n,p=>{e(Te).length===0?p(i):p(d,!1)},!0)}v(t,a)};N(rr,t=>{e(qe)?t(ar):t(sr,!1)})}r(yt),r(Oe);var or=l(Oe,2);N(or,t=>{}),r(ct),r(Ee);var Mt=l(Ee,2);{var lr=t=>{var a=Fr(),n=s(a),i=s(n),d=s(i,!0);r(i);var p=l(i,2),b=s(p),E=l(s(b),2);G(E),r(b);var z=l(b,2),m=l(s(z),2),I=s(m);I.value=I.__value="sub";var f=l(I);f.value=f.__value="main";var M=l(f);M.value=M.__value="datathon";var q=l(M);q.value=q.__value="ideathon",r(m),r(z);var A=l(z,2),y=l(s(A),2);G(y),r(A);var g=l(A,2),C=l(s(g),2);G(C),r(g);var B=l(g,2),w=s(B);w.__click=()=>o(se,!1);var P=l(w,2),U=s(P,!0);r(P),r(B),r(p),r(n),r(a),D(()=>{x(d,e(Z)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •":"í€˜ìŠ¤íŠ¸ ì¶”ê°€"),P.disabled=e(xe),x(U,e(xe)?"ì €ì¥ ì¤‘...":e(Z)?"ìˆ˜ì •":"ì¶”ê°€")}),$r("submit",p,$=>{$.preventDefault(),Kt()}),W(E,()=>e(oe),$=>o(oe,$)),lt(m,()=>e(le),$=>o(le,$)),W(y,()=>e(ie),$=>o(ie,$)),W(C,()=>e(ne),$=>o(ne,$)),v(t,a)};N(Mt,t=>{e(se)&&t(lr)})}var ir=l(Mt,2);{var nr=t=>{var a=Zr(),n=s(a),i=l(s(n),4),d=s(i),p=l(s(d),2);G(p),r(d);var b=l(d,2),E=l(s(b),2);G(E),tt(2),r(b);var z=l(b,2);{var m=y=>{var g=Yr(),C=s(g),B=l(C,2),w=l(s(B),2),P=s(w);r(w);var U=l(w,4),$=s(U);r(U);var S=l(U,4),F=s(S);r(S);var ke=l(S,4),We=s(ke);r(ke),r(B);var ve=l(B,2);{var Ye=Ze=>{var He=Wr(),Je=s(He),dr=s(Je);r(Je);var Tt=l(Je,2);H(Tt,21,()=>e(L).errors,J,(ur,cr)=>{var Xe=Vr(),vr=s(Xe);r(Xe),D(()=>x(vr,`Â· ${e(cr)??""}`)),v(ur,Xe)}),r(Tt),r(He),D(()=>x(dr,`ì˜¤ë¥˜ (${e(L).errors.length??""}ê±´):`)),v(Ze,He)};N(ve,Ze=>{e(L).errors.length>0&&Ze(Ye)})}r(g),D(()=>{at(g,1,`rounded-lg border p-3 ${e(L).errors.length>0?"border-yellow-300 bg-yellow-50":"border-green-300 bg-green-50"}`),at(C,1,`text-sm font-medium ${e(L).errors.length>0?"text-yellow-800":"text-green-800"} mb-2`),x(P,`${e(L).quests_created??""}ê°œ`),x($,`${e(L).quests_updated??""}ê°œ`),x(F,`${e(L).scores_created??""}ê°œ`),x(We,`${e(L).scores_updated??""}ê°œ`)}),v(y,g)};N(z,y=>{e(L)&&y(m)})}var I=l(z,2),f=s(I);f.__click=()=>o(Me,!1);var M=s(f,!0);r(f);var q=l(f,2);q.__click=Pt;var A=s(q,!0);r(q),r(I),r(i),r(n),r(a),D(y=>{x(M,e(L)?"ë‹«ê¸°":"ì·¨ì†Œ"),q.disabled=y,x(A,e(me)?"ê°€ì ¸ì˜¤ëŠ” ì¤‘...":"ê°€ì ¸ì˜¤ê¸°")},[()=>e(me)||!e(de).trim()]),W(p,()=>e(de),y=>o(de,y)),W(E,()=>e(_e),y=>o(_e,y)),v(t,a)};N(ir,t=>{e(Me)&&t(nr)})}D(()=>{$e.disabled=e(Se),x(tr,e(Se)?"ë¶€ì—¬ ì¤‘...":"+ ë¶€ì—¬")}),lt(Ae,()=>e(ue),t=>o(ue,t)),W(wt,()=>e(ce),t=>o(ce,t)),lt(Ve,()=>e(re),t=>o(re,t)),W(Lt,()=>e(we),t=>o(we,t)),v(c,ut),wr(),Y()}Sr(["click","input","change"]);export{fa as component};
