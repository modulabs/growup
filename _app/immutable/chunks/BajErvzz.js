var p=Object.defineProperty;var f=(t,o,s)=>o in t?p(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s;var i=(t,o,s)=>f(t,typeof o!="symbol"?o+"":o,s);import{b as l}from"./C7Ji4wVr.js";import{am as h}from"./CcVkWGgp.js";import{l as d,b as w}from"./3jTL0Oy-.js";const T=globalThis.__sveltekit_ece89e.env,A=T.PUBLIC_API_BASE_URL||"http://localhost:8000";class c extends Error{constructor(s,n){super(s);i(this,"status");this.status=n}}async function a(t,o,s){const n=h(w),r={"Content-Type":"application/json"};n&&(r.Authorization=`Bearer ${n}`);const e=await fetch(`${A}${o}`,{method:t,headers:r,body:s?JSON.stringify(s):void 0});if(e.status===401)throw d(),typeof window<"u"&&(window.location.href=`${l}/login`),new c("인증이 만료되었습니다. 다시 로그인해주세요.",401);if(e.status!==204){if(!e.ok){const u=await e.json().catch(()=>({detail:"알 수 없는 오류가 발생했습니다."}));throw new c(u.detail||`HTTP ${e.status}`,e.status)}return e.json()}}const g={get:t=>a("GET",t),post:(t,o)=>a("POST",t,o),put:(t,o)=>a("PUT",t,o),patch:(t,o)=>a("PATCH",t,o),del:t=>a("DELETE",t)};export{c as A,g as a};
