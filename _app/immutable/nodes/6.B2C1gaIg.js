import{a as k,f as z}from"../chunks/wpWHR9Sb.js";import{o as C}from"../chunks/D988khm2.js";import{p as F,t as A,g as t,a as H,s as n,e as a,b as p,c as o,r as s}from"../chunks/CchEtKBU.js";import{e as J,s as I}from"../chunks/YWCZP22E.js";import{i as K}from"../chunks/CoOWwNBS.js";import{r as M,a as N}from"../chunks/CAucnRVX.js";import{b as R}from"../chunks/DN98pmxQ.js";import{s as O,a as j}from"../chunks/CJsAfNP2.js";import{g as h}from"../chunks/DDNBaIbs.js";import{b as c}from"../chunks/CpycODcz.js";import{a as Q,A as V}from"../chunks/P1I26QL0.js";import{i as W,u as X,s as Y}from"../chunks/BanGi3_-.js";var Z=z('<div class="text-sm text-red-600 bg-red-50 px-3 py-2 rounded-lg"> </div>'),ee=z('<div class="flex items-center justify-center min-h-screen bg-gray-50 px-4"><div class="w-full max-w-sm"><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-blue-600 mb-2">GrowUp</h1> <p class="text-sm text-gray-500">퀘스트 점수 관리 시스템</p></div> <div class="space-y-4"><div><label for="email" class="block text-sm font-medium text-gray-700 mb-1">이메일</label> <input id="email" type="email" inputmode="email" autocapitalize="off" autocomplete="email" placeholder="name@example.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <div><label for="phone" class="block text-sm font-medium text-gray-700 mb-1">전화번호</label> <input id="phone" type="tel" inputmode="tel" autocomplete="tel" placeholder="010-1234-5678" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <!> <button type="button" class="w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer"> </button></div></div></div></div>');function ce(D,E){F(E,!0);const G=()=>j(W,"$isLoggedIn",y),P=()=>j(X,"$userRole",y),[y,S]=O();let d=p(""),m=p(""),l=p(!1),r=p("");C(()=>{G()&&h(P()==="facilitator"?`${c}/facilitator`:`${c}/student`)});async function T(){if(!t(d).trim()||!t(m).trim()){a(r,"이메일과 전화번호를 입력해주세요.");return}a(l,!0),a(r,"");try{const e=t(m).replace(/\D/g,""),i=await Q.post("/api/v1/auth/login",{email:t(d).trim(),phone:e});Y(i),N(`${i.name}님, 환영합니다!`,"success"),i.role==="facilitator"?h(`${c}/facilitator`):h(`${c}/student`)}catch(e){e instanceof V?e.status===401?a(r,"등록되지 않은 사용자입니다. 모두연 LMS 등록 여부를 확인해주세요."):a(r,e.message,!0):a(r,"서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.")}finally{a(l,!1)}}var f=ee(),_=o(f),$=o(_),w=n(o($),2),b=o(w),v=n(o(b),2);M(v),s(b);var g=n(b,2),x=n(o(g),2);M(x),s(g);var L=n(g,2);{var U=e=>{var i=Z(),B=o(i,!0);s(i),A(()=>I(B,t(r))),k(e,i)};K(L,e=>{t(r)&&e(U)})}var u=n(L,2),q=o(u,!0);s(u),s(w),s($),s(_),s(f),A(()=>{v.disabled=t(l),x.disabled=t(l),u.disabled=t(l),I(q,t(l)?"로그인 중...":"로그인")}),R(v,()=>t(d),e=>a(d,e)),R(x,()=>t(m),e=>a(m,e)),J("click",u,T),k(D,f),H(),S()}export{ce as component};
