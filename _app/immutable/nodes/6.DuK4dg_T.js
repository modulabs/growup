import{a as F,f as z}from"../chunks/_V9dK3ok.js";import{o as B}from"../chunks/1hPTKaIJ.js";import{p as C,t as I,g as t,a as H,s as n,e as a,b as p,c as s,r as o}from"../chunks/CcVkWGgp.js";import{e as J,s as M}from"../chunks/Dap9sqf4.js";import{i as K}from"../chunks/BSGnc2-w.js";import{r as P,a as N}from"../chunks/By8uYFO7.js";import{b as R}from"../chunks/CZzPbpj5.js";import{s as O,a as j}from"../chunks/Dn1l8nLM.js";import{g as _}from"../chunks/LoNY-kA5.js";import{b as u}from"../chunks/BqdsdljB.js";import{a as Q,A as V}from"../chunks/7tRFSso3.js";import{i as X,u as Y,s as Z}from"../chunks/3jTL0Oy-.js";var ee=z('<div class="text-sm text-red-600 bg-red-50 px-3 py-2 rounded-lg"> </div>'),te=z('<div class="flex items-center justify-center min-h-screen bg-gray-50 px-4"><div class="w-full max-w-sm"><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-blue-600 mb-2">GrowUp</h1> <p class="text-sm text-gray-500">퀘스트 점수 관리 시스템</p></div> <div class="space-y-4"><div><label for="email" class="block text-sm font-medium text-gray-700 mb-1">이메일</label> <input id="email" type="email" inputmode="email" autocapitalize="off" autocomplete="email" placeholder="name@example.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <div><label for="phone" class="block text-sm font-medium text-gray-700 mb-1">전화번호</label> <input id="phone" type="tel" inputmode="tel" autocomplete="tel" placeholder="010-1234-5678" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <!> <button type="button" class="w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer"> </button></div></div></div></div>');function fe(D,E){C(E,!0);const G=()=>j(X,"$isLoggedIn",$),S=()=>j(Y,"$userRole",$),[$,T]=O();let d=p(""),i=p(""),l=p(!1),r=p("");B(()=>{G()&&_(S()==="facilitator"?`${u}/facilitator`:`${u}/student`)});async function U(){if(!t(d).trim()||!t(i).trim()){a(r,"이메일과 전화번호를 입력해주세요.");return}a(l,!0),a(r,"");try{const e=t(i).trim().endsWith("Facil"),h=(e?t(i).trim().slice(0,-5):t(i)).replace(/\D/g,"")+(e?"Facil":""),y=await Q.post("/api/v1/auth/login",{email:t(d).trim(),phone:h});Z(y),N(`${y.name}님, 환영합니다!`,"success"),y.role==="facilitator"?_(`${u}/facilitator`):_(`${u}/student`)}catch(e){e instanceof V?e.status===401?a(r,"등록되지 않은 사용자입니다. 모두연 LMS 등록 여부를 확인해주세요."):a(r,e.message,!0):a(r,"서버에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.")}finally{a(l,!1)}}var f=te(),w=s(f),L=s(w),k=n(s(L),2),b=s(k),v=n(s(b),2);P(v),o(b);var g=n(b,2),x=n(s(g),2);P(x),o(g);var A=n(g,2);{var W=e=>{var c=ee(),h=s(c,!0);o(c),I(()=>M(h,t(r))),F(e,c)};K(A,e=>{t(r)&&e(W)})}var m=n(A,2),q=s(m,!0);o(m),o(k),o(L),o(w),o(f),I(()=>{v.disabled=t(l),x.disabled=t(l),m.disabled=t(l),M(q,t(l)?"로그인 중...":"로그인")}),R(v,()=>t(d),e=>a(d,e)),R(x,()=>t(i),e=>a(i,e)),J("click",m,U),F(D,f),H(),T()}export{fe as component};
