import{a as i,f as p,c as J}from"../chunks/_V9dK3ok.js";import{o as Pe}from"../chunks/1hPTKaIJ.js";import{p as Qe,t as P,a as Re,e as Q,g as t,c as r,r as e,s,b as V,h as C,f as W,q as wt}from"../chunks/CcVkWGgp.js";import{d as Be,s as o}from"../chunks/Dap9sqf4.js";import{i as y}from"../chunks/BSGnc2-w.js";import{e as X,i as Z}from"../chunks/GjfVCmik.js";import{a as Ae,s as tt}from"../chunks/By8uYFO7.js";import{s as Y}from"../chunks/DObsSMuQ.js";import{L as Oe,s as Gt}from"../chunks/Crjibkup.js";import{s as Ue,a as Ht}from"../chunks/Dn1l8nLM.js";import{p as Fe}from"../chunks/Bjt0Kt7m.js";import{g as Ke}from"../chunks/CoZSwFGi.js";import{b as Ne}from"../chunks/BECQi3MN.js";import{a as Jt}from"../chunks/KGjQhS55.js";import{i as We,a as Ye}from"../chunks/3jTL0Oy-.js";import{S as Vt,Q as Ge}from"../chunks/DqiXTygU.js";var He=p('<span class="ml-2 bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full text-xs"> </span>'),Je=p('<span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">ì œì¶œë¨</span>'),Ve=p('<span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-400">ë¯¸ì œì¶œ</span>'),Xe=p('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 font-medium text-gray-900"> </td><td class="px-6 py-4"><span class="px-2 py-1 text-xs rounded bg-blue-50 text-blue-700 border border-blue-100"> </span></td><td class="px-6 py-4 text-gray-700 font-medium"> </td><td class="px-6 py-4 text-gray-500"> </td><td> </td><td class="px-6 py-4 text-center"><!></td></tr>'),Ze=p('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[720px]"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left font-medium text-gray-600">í€˜ìŠ¤íŠ¸</th><th class="px-6 py-3 text-left font-medium text-gray-600">ìœ í˜•</th><th class="px-6 py-3 text-left font-medium text-gray-600">ì œëª©</th><th class="px-6 py-3 text-left font-medium text-gray-600">ë‚ ì§œ</th><th class="px-6 py-3 text-center font-medium text-gray-600">ì ìˆ˜</th><th class="px-6 py-3 text-center font-medium text-gray-600">ìƒíƒœ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),tr=p('<div class="text-center py-20 text-gray-500"><p>ë“±ë¡ëœ í€˜ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>'),er=p("<span>â˜…</span>"),rr=p('<div class="p-6"><div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between bg-purple-50/40 border border-purple-100 rounded-xl px-4 py-4"><h4 class="font-semibold text-gray-800 text-base sm:text-lg flex items-center gap-2"><span class="w-1.5 h-5 bg-purple-600 rounded-full"></span> </h4> <div class="flex items-center gap-3"><div class="flex items-center gap-1"></div> <span class="text-sm font-semibold text-gray-600"> </span></div></div></div>'),ar=p('<div class="divide-y divide-gray-100"></div>'),sr=p('<div class="text-center py-20 text-gray-500 bg-gray-50/50"><p class="mb-2">ë…¸ë“œ ì ìˆ˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p> <p class="text-sm text-gray-400">ì•„ì§ í‰ê°€ê°€ ì§„í–‰ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë°ì´í„°ê°€ ì—°ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p></div>'),or=p('<tr class="hover:bg-amber-50/30 transition-colors"><td class="px-6 py-4 text-gray-800 font-medium"> </td><td class="px-6 py-4 text-gray-600"> </td><td class="px-6 py-4 text-center font-bold text-amber-600"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-gray-400 text-xs"> </td></tr>'),lr=p('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[720px]"><thead class="bg-amber-50/50"><tr><th class="px-6 py-3 text-left font-medium text-amber-900/60">ì¹´í…Œê³ ë¦¬</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ìƒì„¸ ì‚¬ìœ </th><th class="px-6 py-3 text-center font-medium text-amber-900/60">ì ìˆ˜</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë¶€ì—¬ì</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë‚ ì§œ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),ir=p('<div class="text-center py-20 text-gray-500"><p>ë¹„ì •ê·œ ì ìˆ˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>'),dr=p('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"><div class="space-y-4"><div class="bg-gradient-to-r from-red-50 to-white rounded-xl border border-red-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-red-800 font-bold text-lg flex items-center gap-2">â¤ï¸ ì„±ì¥ ì˜¨ë„</h3> <p class="text-red-600 text-xs mt-1">ê¾¸ì¤€í•œ ì°¸ì—¬ì™€ ì„±ì·¨ì˜ ê²°ê³¼ì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-red-600"> </span></div> <div class="w-full bg-red-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-red-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg></div></div> <div class="bg-gradient-to-r from-orange-50 to-white rounded-xl border border-orange-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-orange-800 font-bold text-lg flex items-center gap-2">ğŸ”¥ ì—´ì • ì˜¨ë„</h3> <p class="text-orange-600 text-xs mt-1">ìµœê·¼ 2ì£¼ê°„ì˜ í™œë™ ì§€í‘œì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-orange-500"> </span></div> <div class="w-full bg-orange-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-orange-400 to-orange-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-orange-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 10c0-2.21-1.79-4-4-4s-4 1.79-4 4c0 .3.03.6.09.88.07-.02.14-.04.22-.04.83 0 1.5.67 1.5 1.5 0 .83-.67 1.5-1.5 1.5-.26 0-.5-.07-.72-.19-.4.92-.79 2.15-.79 3.35 0 2.76 2.24 5 5 5s5-2.24 5-5c0-2.3-1.63-4.25-3.8-4.82zM15 2c0 5 4 8 4 11 0 4.42-3.58 8-8 8S3 17.42 3 13c0-3 2-5 2-5s.5-.5 1.5 0c1 .5 2 2 2 2s-.5-4 2.5-6 3-2 4-2z"></path></svg></div></div></div> <div class="grid grid-cols-2 gap-4"><div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">í€˜ìŠ¤íŠ¸ ì§„í–‰ë¥ </div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-blue-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2"> </p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">ë…¸ë“œ ì ìˆ˜</div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" stroke-dashoffset="0" class="text-purple-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2">í‰ê°€ ì™„ë£Œ</p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center col-span-2"><p class="text-sm text-gray-500 font-medium mb-1">ì´ íšë“ ì ìˆ˜</p> <span class="text-4xl font-bold text-gray-800 mb-1"> </span> <div class="text-xs text-gray-400 flex flex-col gap-1"><span>í€˜ìŠ¤íŠ¸: <span class="text-blue-600 font-medium"> </span></span> <span>ë¹„ì •ê·œ: <span class="text-amber-600 font-medium"> </span></span></div></div></div></div> <div class="bg-white rounded-lg border border-gray-200 overflow-hidden min-h-[500px]"><div class="flex border-b border-gray-200"><button>í€˜ìŠ¤íŠ¸ ì ìˆ˜</button> <button>ë…¸ë“œ ì ìˆ˜</button> <button>ë¹„ì •ê·œ ì ìˆ˜ <!></button></div> <div class="p-0"><!> <!> <!></div></div>',1),nr=p('<div class="text-center py-12 text-gray-500"><p>ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></div>'),vr=p('<div class="max-w-4xl mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><h1 class="text-2xl font-bold text-gray-800"> </h1></div> <!></div>');function qr(Xt,Zt){Qe(Zt,!0);const te=()=>Ht(Ye,"$activeCourses",kt),ee=()=>Ht(We,"$isLoggedIn",kt),[kt,re]=Ue();let et=V(!0),d=V(null),M=V(null),rt=C(()=>Fe.params.courseId),ae=C(()=>{var a;return((a=te().find(v=>String(v.legacy_course_id)===t(rt)))==null?void 0:a.name)||"ê³¼ì •"}),L=C(()=>{var a;return((a=t(d))==null?void 0:a.scores.length)||0}),G=C(()=>{var a;return((a=t(d))==null?void 0:a.scores.filter(v=>v.is_submitted).length)||0}),se=C(()=>{var a;return((a=t(M))==null?void 0:a.tasks.length)||0}),oe=C(()=>{var a;return((a=t(M))==null?void 0:a.tasks.reduce((v,u)=>v+u.total_human+u.total_gpt,0))||0}),le=C(()=>{var a;return((a=t(M))==null?void 0:a.tasks.reduce((v,u)=>v+u.rubric_items.length*2,0))||0}),$t=C(()=>{if(!t(d)||t(L)===0)return 0;const a=t(G)/t(L)*100;let v=0;t(d).scores.forEach(f=>{const B=Vt[f.quest_type]||Vt.main;v+=B.max});const u=t(d).total_quest_score+t(oe),R=v+t(le),j=R>0?u/R*100:0;return Math.round(a*.6+j*.4)}),Ct=C(()=>{if(!t(d))return 0;const a=new Date,v=new Date(a.getTime()-14*24*60*60*1e3),u=t(d).scores.filter(j=>{const f=new Date(j.quest_date);return f>=v&&f<=a});if(u.length===0)return 36.5;const R=u.filter(j=>j.is_submitted).length;return Math.round(R/u.length*100)}),h=V("quests");Pe(async()=>{if(!ee()){Ke(`${Ne}/login`);return}await Promise.all([ie(),de()])});async function ie(){Q(et,!0);try{Q(d,await Jt.get(`/api/v1/student/courses/${t(rt)}/scores`),!0)}catch{Ae("ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{Q(et,!1)}}async function de(){try{Q(M,await Jt.get(`/api/v1/student/courses/${t(rt)}/rubrics`),!0)}catch(a){console.error("Failed to load rubrics:",a)}}function ne(a,v){return v?a===null?"-":String(a):"ë¯¸ì œì¶œ"}function ve(a){return a?"text-gray-900":"text-gray-400 italic"}function ce(a){try{return new Date(a).toLocaleDateString("ko-KR")}catch{return a}}function at(a){return Math.max(0,Math.min(3,Math.round(a)))}var st=vr(),ot=r(st),St=r(ot),xe=r(St,!0);e(St),e(ot);var pe=s(ot,2);{var ue=a=>{Oe(a,{type:"table",lines:5})},me=a=>{var v=J(),u=W(v);{var R=f=>{var B=dr(),lt=W(B),it=r(lt),dt=r(it),nt=r(dt),qt=s(r(nt),2),ge=r(qt);e(qt),e(nt);var Mt=s(nt,2),fe=r(Mt);e(Mt),wt(2),e(dt);var Lt=s(dt,2),vt=r(Lt),jt=s(r(vt),2),_e=r(jt);e(jt),e(vt);var Dt=s(vt,2),be=r(Dt);e(Dt),wt(2),e(Lt),e(it);var It=s(it,2),ct=r(It),xt=s(r(ct),2),pt=r(xt),Tt=s(r(pt));tt(Tt,"stroke-dasharray",2*Math.PI*40),e(pt);var zt=s(pt,2),ye=r(zt);e(zt),e(xt);var Et=s(xt,2),he=r(Et);e(Et),e(ct);var ut=s(ct,2),Pt=s(r(ut),2),mt=r(Pt),we=s(r(mt));tt(we,"stroke-dasharray",2*Math.PI*40),e(mt);var Qt=s(mt,2),ke=r(Qt);e(Qt),e(Pt),wt(2),e(ut);var Rt=s(ut,2),gt=s(r(Rt),2),$e=r(gt,!0);e(gt);var Bt=s(gt,2),ft=r(Bt),At=s(r(ft)),Ce=r(At,!0);e(At),e(ft);var Ot=s(ft,2),Ut=s(r(Ot)),Se=r(Ut);e(Ut),e(Ot),e(Bt),e(Rt),e(It),e(lt);var Ft=s(lt,2),_t=r(Ft),bt=r(_t);bt.__click=()=>Q(h,"quests");var yt=s(bt,2);yt.__click=()=>Q(h,"rubrics");var H=s(yt,2);H.__click=()=>Q(h,"bonus");var qe=s(r(H));{var Me=c=>{var m=He(),D=r(m,!0);e(m),P(()=>o(D,t(d).bonus_scores.length)),i(c,m)};y(qe,c=>{t(d).bonus_scores.length>0&&c(Me)})}e(H),e(_t);var Kt=s(_t,2),Nt=r(Kt);{var Le=c=>{var m=J(),D=W(m);{var F=l=>{var x=Ze(),I=r(x),b=s(r(I));X(b,21,()=>t(d).scores,Z,(T,n)=>{var _=Xe(),w=r(_),A=r(w);e(w);var g=s(w),z=r(g),E=r(z,!0);e(z),e(g);var k=s(g),$=r(k,!0);e(k);var S=s(k),O=r(S,!0);e(S);var U=s(S),ht=r(U,!0);e(U);var Yt=s(U),Te=r(Yt);{var ze=q=>{var N=Je();i(q,N)},Ee=q=>{var N=Ve();i(q,N)};y(Te,q=>{t(n).is_submitted?q(ze):q(Ee,!1)})}e(Yt),e(_),P((q,N)=>{o(A,`#${t(n).quest_number??""}`),o(E,Ge[t(n).quest_type]||t(n).quest_type),o($,t(n).title||"-"),o(O,t(n).quest_date),Y(U,1,`px-6 py-4 text-center ${q??""}`),o(ht,N)},[()=>ve(t(n).is_submitted),()=>ne(t(n).score,t(n).is_submitted)]),i(T,_)}),e(b),e(I),e(x),i(l,x)},K=l=>{var x=tr();i(l,x)};y(D,l=>{t(d).scores.length>0?l(F):l(K,!1)})}i(c,m)};y(Nt,c=>{t(h)==="quests"&&c(Le)})}var Wt=s(Nt,2);{var je=c=>{var m=J(),D=W(m);{var F=l=>{var x=ar();X(x,21,()=>t(M).tasks,Z,(I,b)=>{var T=rr(),n=r(T),_=r(n),w=s(r(_));e(_);var A=s(_,2),g=r(A);X(g,20,()=>[0,1,2],Z,(k,$)=>{var S=er();P(O=>Y(S,1,O),[()=>`text-2xl leading-none ${$<at(t(b).total_human)?"text-amber-400":"text-gray-300"}`]),i(k,S)}),e(g);var z=s(g,2),E=r(z);e(z),e(A),e(n),e(T),P((k,$)=>{o(w,` í”„ë¡œì íŠ¸ : ${t(b).task_title??""}`),tt(g,"aria-label",k),o(E,`${$??""}ì `)},[()=>`íœ´ë¨¼ ì ìˆ˜ ${at(t(b).total_human)}ì `,()=>at(t(b).total_human)]),i(I,T)}),e(x),i(l,x)},K=l=>{var x=sr();i(l,x)};y(D,l=>{t(M)&&t(M).tasks.length>0?l(F):l(K,!1)})}i(c,m)};y(Wt,c=>{t(h)==="rubrics"&&c(je)})}var De=s(Wt,2);{var Ie=c=>{var m=J(),D=W(m);{var F=l=>{var x=lr(),I=r(x),b=s(r(I));X(b,21,()=>t(d).bonus_scores,Z,(T,n)=>{var _=or(),w=r(_),A=r(w,!0);e(w);var g=s(w),z=r(g,!0);e(g);var E=s(g),k=r(E);e(E);var $=s(E),S=r($,!0);e($);var O=s($),U=r(O,!0);e(O),e(_),P(ht=>{o(A,t(n).category||"-"),o(z,t(n).reason||"-"),o(k,`+${t(n).score??""}`),o(S,t(n).given_by_name),o(U,ht)},[()=>ce(t(n).given_at)]),i(T,_)}),e(b),e(I),e(x),i(l,x)},K=l=>{var x=ir();i(l,x)};y(D,l=>{t(d).bonus_scores.length>0?l(F):l(K,!1)})}i(c,m)};y(De,c=>{t(h)==="bonus"&&c(Ie)})}e(Kt),e(Ft),P(c=>{o(ge,`${t($t)??""}Â°C`),Gt(fe,`width: ${t($t)??""}%`),o(_e,`${t(Ct)??""}Â°C`),Gt(be,`width: ${t(Ct)??""}%`),tt(Tt,"stroke-dashoffset",2*Math.PI*40*(1-(t(L)>0?t(G)/t(L):0))),o(ye,`${c??""}%`),o(he,`${t(G)??""} / ${t(L)??""} ì™„ë£Œ`),o(ke,`${t(se)??""}ê±´`),o($e,t(d).total_score),o(Ce,t(d).total_quest_score),o(Se,`+${t(d).total_bonus_score??""}`),Y(bt,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(h)==="quests"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),Y(yt,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(h)==="rubrics"?"border-purple-600 text-purple-600 bg-purple-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),Y(H,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(h)==="bonus"?"border-amber-600 text-amber-600 bg-amber-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`)},[()=>t(L)>0?Math.round(t(G)/t(L)*100):0]),i(f,B)},j=f=>{var B=nr();i(f,B)};y(u,f=>{t(d)?f(R):f(j,!1)},!0)}i(a,v)};y(pe,a=>{t(et)?a(ue):a(me,!1)})}e(st),P(()=>o(xe,t(ae))),i(Xt,st),Re(),re()}Be(["click"]);export{qr as component};
