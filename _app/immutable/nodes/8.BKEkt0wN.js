import{a as c,f as p,c as H}from"../chunks/_V9dK3ok.js";import{o as Ue}from"../chunks/1hPTKaIJ.js";import{p as Ze,t as R,a as Fe,e as A,g as t,c as a,r as e,s,b as J,h as S,f as W,q as kt}from"../chunks/CcVkWGgp.js";import{d as Ke,s as i}from"../chunks/Dap9sqf4.js";import{i as k}from"../chunks/BSGnc2-w.js";import{e as X,i as tt}from"../chunks/GjfVCmik.js";import{a as Ne,s as et}from"../chunks/By8uYFO7.js";import{s as U}from"../chunks/CWDCDM9S.js";import{L as Ve,s as Ht}from"../chunks/C0NRKcx4.js";import{s as We,a as Jt}from"../chunks/Dn1l8nLM.js";import{p as Ye}from"../chunks/BowGR-UC.js";import{g as Ge}from"../chunks/DH8wmLc-.js";import{b as He}from"../chunks/BNJDIiab.js";import{a as Xt}from"../chunks/BoWe7QyW.js";import{i as Je,a as Xe}from"../chunks/3jTL0Oy-.js";import{S as rt,Q as tr}from"../chunks/DqiXTygU.js";var er=p('<span class="ml-2 bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full text-xs"> </span>'),rr=p('<span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">ì œì¶œë¨</span>'),ar=p('<span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-400">ë¯¸ì œì¶œ</span>'),sr=p('<tr class="hover:bg-gray-50 transition-colors"><td class="px-4 py-2.5 font-medium text-gray-900"> </td><td class="px-4 py-2.5"><span> </span></td><td class="px-4 py-2.5 text-gray-700 font-medium"> </td><td class="px-4 py-2.5 text-gray-500"> </td><td class="px-4 py-2.5 text-center"><span> </span></td><td class="px-4 py-2.5 text-center"><!></td></tr>'),or=p('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[680px]"><thead class="bg-gray-50"><tr><th class="px-4 py-2.5 text-left font-medium text-gray-600">í€˜ìŠ¤íŠ¸</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ìœ í˜•</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ì œëª©</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ë‚ ì§œ</th><th class="px-4 py-2.5 text-center font-medium text-gray-600">ì ìˆ˜</th><th class="px-4 py-2.5 text-center font-medium text-gray-600">ìƒíƒœ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),ir=p('<div class="text-center py-20 text-gray-500"><p>ë“±ë¡ëœ í€˜ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>'),lr=p("<span>â˜…</span>"),nr=p('<div class="p-3"><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between bg-purple-50/40 border border-purple-100 rounded-lg px-3 py-2.5"><h4 class="font-semibold text-gray-800 text-base sm:text-lg flex items-center gap-2"><span class="w-1.5 h-5 bg-purple-600 rounded-full"></span> </h4> <div class="flex items-center gap-2"><div class="flex items-center gap-1"></div> <span class="text-xs font-semibold text-gray-600"> </span></div></div></div>'),dr=p('<div class="divide-y divide-gray-100"></div>'),cr=p('<div class="text-center py-20 text-gray-500 bg-gray-50/50"><p class="mb-2">ë…¸ë“œ ì ìˆ˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p> <p class="text-sm text-gray-400">ì•„ì§ í‰ê°€ê°€ ì§„í–‰ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë°ì´í„°ê°€ ì—°ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p></div>'),vr=p('<tr class="hover:bg-amber-50/30 transition-colors"><td class="px-6 py-4 text-gray-800 font-medium"> </td><td class="px-6 py-4 text-gray-600"> </td><td class="px-6 py-4 text-center font-bold text-amber-600"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-gray-400 text-xs"> </td></tr>'),xr=p('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[720px]"><thead class="bg-amber-50/50"><tr><th class="px-6 py-3 text-left font-medium text-amber-900/60">ì¹´í…Œê³ ë¦¬</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ìƒì„¸ ì‚¬ìœ </th><th class="px-6 py-3 text-center font-medium text-amber-900/60">ì ìˆ˜</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë¶€ì—¬ì</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë‚ ì§œ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),ur=p('<div class="text-center py-20 text-gray-500"><p>ë¹„ì •ê·œ ì ìˆ˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>'),pr=p('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"><div class="space-y-4"><div class="bg-gradient-to-r from-red-50 to-white rounded-xl border border-red-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-red-800 font-bold text-lg flex items-center gap-2">â¤ï¸ ì„±ì¥ ì˜¨ë„</h3> <p class="text-red-600 text-xs mt-1">ê¾¸ì¤€í•œ ì°¸ì—¬ì™€ ì„±ì·¨ì˜ ê²°ê³¼ì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-red-600"> </span></div> <div class="w-full bg-red-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-red-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg></div></div> <div class="bg-gradient-to-r from-orange-50 to-white rounded-xl border border-orange-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-orange-800 font-bold text-lg flex items-center gap-2">ğŸ”¥ ì—´ì • ì˜¨ë„</h3> <p class="text-orange-600 text-xs mt-1">ìµœê·¼ 2ì£¼ê°„ì˜ í™œë™ ì§€í‘œì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-orange-500"> </span></div> <div class="w-full bg-orange-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-orange-400 to-orange-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-orange-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 10c0-2.21-1.79-4-4-4s-4 1.79-4 4c0 .3.03.6.09.88.07-.02.14-.04.22-.04.83 0 1.5.67 1.5 1.5 0 .83-.67 1.5-1.5 1.5-.26 0-.5-.07-.72-.19-.4.92-.79 2.15-.79 3.35 0 2.76 2.24 5 5 5s5-2.24 5-5c0-2.3-1.63-4.25-3.8-4.82zM15 2c0 5 4 8 4 11 0 4.42-3.58 8-8 8S3 17.42 3 13c0-3 2-5 2-5s.5-.5 1.5 0c1 .5 2 2 2 2s-.5-4 2.5-6 3-2 4-2z"></path></svg></div></div></div> <div class="grid grid-cols-2 gap-4"><div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">í€˜ìŠ¤íŠ¸ ì§„í–‰ë¥ </div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-blue-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2"> </p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">ë…¸ë“œ ì§„í–‰ë¥ </div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" stroke-dashoffset="0" class="text-purple-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2">í‰ê°€ ì™„ë£Œ</p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center col-span-2"><p class="text-sm text-gray-500 font-medium mb-1">ì´ íšë“ ì ìˆ˜</p> <span class="text-4xl font-bold text-gray-800 mb-1"> </span> <div class="text-xs text-gray-400 flex flex-col gap-1"><span>í€˜ìŠ¤íŠ¸: <span class="text-blue-600 font-medium"> </span></span> <span>ë¹„ì •ê·œ: <span class="text-amber-600 font-medium"> </span></span></div></div></div></div> <div class="bg-white rounded-lg border border-gray-200 overflow-hidden min-h-[500px]"><div class="flex border-b border-gray-200"><button>í€˜ìŠ¤íŠ¸ ì ìˆ˜</button> <button>ë…¸ë“œ ì ìˆ˜</button> <button>ë¹„ì •ê·œ ì ìˆ˜ <!></button></div> <div class="p-0"><!> <!> <!></div></div>',1),gr=p('<div class="text-center py-12 text-gray-500"><p>ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></div>'),mr=p('<div class="max-w-4xl mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><h1 class="text-2xl font-bold text-gray-800"> </h1></div> <!></div>');function Ir(te,ee){Ze(ee,!0);const re=()=>Jt(Xe,"$activeCourses",$t),ae=()=>Jt(Je,"$isLoggedIn",$t),[$t,se]=We();let at=J(!0),v=J(null),D=J(null),st=S(()=>Ye.params.courseId),oe=S(()=>{var r;return((r=re().find(l=>String(l.legacy_course_id)===t(st)))==null?void 0:r.name)||"ê³¼ì •"}),I=S(()=>{var r;return((r=t(v))==null?void 0:r.scores.length)||0}),Y=S(()=>{var r;return((r=t(v))==null?void 0:r.scores.filter(l=>l.is_submitted).length)||0}),ie=S(()=>{var r;return((r=t(D))==null?void 0:r.tasks.length)||0}),le=S(()=>{var r;return((r=t(D))==null?void 0:r.tasks.reduce((l,n)=>l+n.total_human+n.total_gpt,0))||0}),ne=S(()=>{var r;return((r=t(D))==null?void 0:r.tasks.reduce((l,n)=>l+n.rubric_items.length*2,0))||0}),qt=S(()=>{if(!t(v)||t(I)===0)return 0;const r=t(Y)/t(I)*100;let l=0;t(v).scores.forEach(_=>{const B=rt[_.quest_type]||rt.main;l+=B.max});const n=t(v).total_quest_score+t(le),g=l+t(ne),m=g>0?n/g*100:0;return Math.round(r*.6+m*.4)}),Ct=S(()=>{if(!t(v))return 0;const r=new Date,l=new Date(r.getTime()-14*24*60*60*1e3),n=t(v).scores.filter(m=>{const _=new Date(m.quest_date);return _>=l&&_<=r});if(n.length===0)return 36.5;const g=n.filter(m=>m.is_submitted).length;return Math.round(g/n.length*100)}),$=J("quests");Ue(async()=>{if(!ae()){Ge(`${He}/login`);return}await Promise.all([de(),ce()])});async function de(){A(at,!0);try{A(v,await Xt.get(`/api/v1/student/courses/${t(st)}/scores`),!0)}catch{Ne("ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{A(at,!1)}}async function ce(){try{A(D,await Xt.get(`/api/v1/student/courses/${t(st)}/rubrics`),!0)}catch(r){console.error("Failed to load rubrics:",r)}}function ve(r){switch(r){case"sub":return"bg-cyan-100 text-cyan-900 border-cyan-300";case"main":return"bg-indigo-100 text-indigo-900 border-indigo-300";case"datathon":return"bg-emerald-100 text-emerald-900 border-emerald-300";case"ideathon":return"bg-fuchsia-100 text-fuchsia-900 border-fuchsia-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}}function Mt(r,l){const n=(rt[r]||rt.main).max;return n}function xe(r,l,n){if(!l)return"bg-gray-100 text-gray-400 border-gray-200";if(r===null)return"bg-gray-100 text-gray-500 border-gray-200";if(n==="main")return r>=5?"bg-indigo-100 text-indigo-900 border-indigo-300":r>=4?"bg-emerald-100 text-emerald-900 border-emerald-300":r>=3?"bg-lime-100 text-lime-900 border-lime-300":r>=2?"bg-amber-100 text-amber-900 border-amber-300":r>=1?"bg-orange-100 text-orange-900 border-orange-300":"bg-red-100 text-red-900 border-red-300";const g=Mt(n,r),m=g>0?r/g:0;return m<=0?"bg-red-100 text-red-900 border-red-300":m<.4?"bg-orange-100 text-orange-900 border-orange-300":m<.75?"bg-yellow-100 text-yellow-900 border-yellow-300":m<1?"bg-lime-100 text-lime-900 border-lime-300":"bg-emerald-200 text-emerald-950 border-emerald-400"}function ue(r,l,n){if(!l)return"ë¯¸ì œì¶œ";if(r===null)return"-";if(n==="main")return String(r);const g=Mt(n,r);return r>g?`${r}ì `:`${r} / ${g}`}function pe(r){try{return new Date(r).toLocaleDateString("ko-KR")}catch{return r}}function ot(r){return Math.max(0,Math.min(3,Math.round(r)))}function St(r){return r.replace(/^[A-Z0-9]+(?:-[A-Z0-9]+)*\.\s*/i,"").replace(/^í”„ë¡œì íŠ¸\s*[:ï¼š]?\s*/i,"").replace(/^\d+\.\s*/,"").trim()}function ge(r){return!/í”„ë¡œì íŠ¸/i.test(r)}var it=mr(),lt=a(it),Lt=a(lt),me=a(Lt,!0);e(Lt),e(lt);var be=s(lt,2);{var fe=r=>{Ve(r,{type:"table",lines:5})},_e=r=>{var l=H(),n=W(l);{var g=_=>{var B=pr(),nt=W(B),dt=a(nt),ct=a(dt),vt=a(ct),jt=s(a(vt),2),ye=a(jt);e(jt),e(vt);var Tt=s(vt,2),he=a(Tt);e(Tt),kt(2),e(ct);var Dt=s(ct,2),xt=a(Dt),It=s(a(xt),2),we=a(It);e(It),e(xt);var Pt=s(xt,2),ke=a(Pt);e(Pt),kt(2),e(Dt),e(dt);var zt=s(dt,2),ut=a(zt),pt=s(a(ut),2),gt=a(pt),Et=s(a(gt));et(Et,"stroke-dasharray",2*Math.PI*40),e(gt);var Qt=s(gt,2),$e=a(Qt);e(Qt),e(pt);var Rt=s(pt,2),qe=a(Rt);e(Rt),e(ut);var mt=s(ut,2),At=s(a(mt),2),bt=a(At),Ce=s(a(bt));et(Ce,"stroke-dasharray",2*Math.PI*40),e(bt);var Bt=s(bt,2),Me=a(Bt);e(Bt),e(At),kt(2),e(mt);var Ot=s(mt,2),ft=s(a(Ot),2),Se=a(ft,!0);e(ft);var Ut=s(ft,2),_t=a(Ut),Zt=s(a(_t)),Le=a(Zt,!0);e(Zt),e(_t);var Ft=s(_t,2),Kt=s(a(Ft)),je=a(Kt);e(Kt),e(Ft),e(Ut),e(Ot),e(zt),e(nt);var Nt=s(nt,2),yt=a(Nt),ht=a(yt);ht.__click=()=>A($,"quests");var wt=s(ht,2);wt.__click=()=>A($,"rubrics");var G=s(wt,2);G.__click=()=>A($,"bonus");var Te=s(a(G));{var De=x=>{var b=er(),P=a(b,!0);e(b),R(()=>i(P,t(v).bonus_scores.length)),c(x,b)};k(Te,x=>{t(v).bonus_scores.length>0&&x(De)})}e(G),e(yt);var Vt=s(yt,2),Wt=a(Vt);{var Ie=x=>{var b=H(),P=W(b);{var Z=d=>{var u=or(),z=a(u),y=s(a(z));X(y,21,()=>t(v).scores,tt,(E,o)=>{var h=sr(),q=a(h),O=a(q);e(q);var f=s(q),L=a(f),Q=a(L,!0);e(L),e(f);var C=s(f),M=a(C,!0);e(C);var w=s(C),j=a(w,!0);e(w);var K=s(w),N=a(K),Qe=a(N,!0);e(N),e(K);var Gt=s(K),Re=a(Gt);{var Ae=T=>{var V=rr();c(T,V)},Be=T=>{var V=ar();c(T,V)};k(Re,T=>{t(o).is_submitted?T(Ae):T(Be,!1)})}e(Gt),e(h),R((T,V,Oe)=>{i(O,`#${t(o).quest_number??""}`),U(L,1,T),i(Q,tr[t(o).quest_type]||t(o).quest_type),i(M,t(o).title||"-"),i(j,t(o).quest_date),U(N,1,V),i(Qe,Oe)},[()=>`px-2 py-1 text-xs rounded border ${ve(t(o).quest_type)}`,()=>`inline-flex items-center rounded-md border px-2 py-1 text-xs font-semibold ${xe(t(o).score,t(o).is_submitted,t(o).quest_type)}`,()=>ue(t(o).score,t(o).is_submitted,t(o).quest_type)]),c(E,h)}),e(y),e(z),e(u),c(d,u)},F=d=>{var u=ir();c(d,u)};k(P,d=>{t(v).scores.length>0?d(Z):d(F,!1)})}c(x,b)};k(Wt,x=>{t($)==="quests"&&x(Ie)})}var Yt=s(Wt,2);{var Pe=x=>{var b=H(),P=W(b);{var Z=d=>{var u=dr();X(u,21,()=>t(D).tasks,tt,(z,y)=>{var E=nr(),o=a(E),h=a(o),q=s(a(h));e(h);var O=s(h,2),f=a(O);X(f,20,()=>[0,1,2],tt,(C,M)=>{var w=lr();R(j=>U(w,1,j),[()=>`text-xl leading-none ${M<ot(t(y).total_human)?"text-amber-400":"text-gray-300"}`]),c(C,w)}),e(f);var L=s(f,2),Q=a(L);e(L),e(O),e(o),e(E),R((C,M,w,j)=>{i(q,` ${C??""}${M??""}`),et(f,"aria-label",w),i(Q,`${j??""}ì `)},[()=>ge(St(t(y).task_title))?"í”„ë¡œì íŠ¸: ":"",()=>St(t(y).task_title),()=>`íœ´ë¨¼ ì ìˆ˜ ${ot(t(y).total_human)}ì `,()=>ot(t(y).total_human)]),c(z,E)}),e(u),c(d,u)},F=d=>{var u=cr();c(d,u)};k(P,d=>{t(D)&&t(D).tasks.length>0?d(Z):d(F,!1)})}c(x,b)};k(Yt,x=>{t($)==="rubrics"&&x(Pe)})}var ze=s(Yt,2);{var Ee=x=>{var b=H(),P=W(b);{var Z=d=>{var u=xr(),z=a(u),y=s(a(z));X(y,21,()=>t(v).bonus_scores,tt,(E,o)=>{var h=vr(),q=a(h),O=a(q,!0);e(q);var f=s(q),L=a(f,!0);e(f);var Q=s(f),C=a(Q);e(Q);var M=s(Q),w=a(M,!0);e(M);var j=s(M),K=a(j,!0);e(j),e(h),R(N=>{i(O,t(o).category||"-"),i(L,t(o).reason||"-"),i(C,`+${t(o).score??""}`),i(w,t(o).given_by_name),i(K,N)},[()=>pe(t(o).given_at)]),c(E,h)}),e(y),e(z),e(u),c(d,u)},F=d=>{var u=ur();c(d,u)};k(P,d=>{t(v).bonus_scores.length>0?d(Z):d(F,!1)})}c(x,b)};k(ze,x=>{t($)==="bonus"&&x(Ee)})}e(Vt),e(Nt),R(x=>{i(ye,`${t(qt)??""}Â°C`),Ht(he,`width: ${t(qt)??""}%`),i(we,`${t(Ct)??""}Â°C`),Ht(ke,`width: ${t(Ct)??""}%`),et(Et,"stroke-dashoffset",2*Math.PI*40*(1-(t(I)>0?t(Y)/t(I):0))),i($e,`${x??""}%`),i(qe,`${t(Y)??""} / ${t(I)??""} ì™„ë£Œ`),i(Me,`${t(ie)??""}ê±´`),i(Se,t(v).total_score),i(Le,t(v).total_quest_score),i(je,`+${t(v).total_bonus_score??""}`),U(ht,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t($)==="quests"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),U(wt,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t($)==="rubrics"?"border-purple-600 text-purple-600 bg-purple-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),U(G,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t($)==="bonus"?"border-amber-600 text-amber-600 bg-amber-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`)},[()=>t(I)>0?Math.round(t(Y)/t(I)*100):0]),c(_,B)},m=_=>{var B=gr();c(_,B)};k(n,_=>{t(v)?_(g):_(m,!1)},!0)}c(r,l)};k(be,r=>{t(at)?r(fe):r(_e,!1)})}e(it),R(()=>i(me,t(oe))),c(te,it),Fe(),se()}Ke(["click"]);export{Ir as component};
