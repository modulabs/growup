import{a as u,f as p,c as qt}from"../chunks/_V9dK3ok.js";import{o as ca}from"../chunks/1hPTKaIJ.js";import{l as va,an as pa,ai as _a,a0 as xa,ao as ba,ap as fa,n as Me,o as ga,p as ma,b as c,d as at,f as Z,e as o,t as S,g as t,a as ya,c as r,s,h as cr,q as Wt,r as e}from"../chunks/CcVkWGgp.js";import{d as ha,s as n,e as wa}from"../chunks/Dap9sqf4.js";import{i as L}from"../chunks/BSGnc2-w.js";import{e as K,i as V}from"../chunks/GjfVCmik.js";import{a as w,r as P,b as vr,s as ka}from"../chunks/By8uYFO7.js";import{s as st,c as Sa}from"../chunks/DObsSMuQ.js";import{L as je,s as $a}from"../chunks/Crjibkup.js";import{b as J}from"../chunks/CZzPbpj5.js";import{s as Ia,a as La}from"../chunks/Dn1l8nLM.js";import{p as Da}from"../chunks/CUxJeCJu.js";import{g as qe}from"../chunks/DxvwbG2z.js";import{b as ze}from"../chunks/ChfkHFl2.js";import{a as A}from"../chunks/CI9ppUBn.js";import{i as Ma}from"../chunks/3jTL0Oy-.js";import{Q as pr}from"../chunks/DqiXTygU.js";function _r(x,C,ot=!1){if(x.multiple){if(C==null)return;if(!xa(C))return ba();for(var N of x.options)N.selected=C.includes(zt(N));return}for(N of x.options){var X=zt(N);if(fa(X,C)){N.selected=!0;return}}(!ot||C!==void 0)&&(x.selectedIndex=-1)}function ja(x){var C=new MutationObserver(()=>{_r(x,x.__value)});C.observe(x,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_a(()=>{C.disconnect()})}function Qe(x,C,ot=C){var N=new WeakSet,X=!0;va(x,"change",O=>{var T=O?"[selected]":":checked",$;if(x.multiple)$=[].map.call(x.querySelectorAll(T),zt);else{var W=x.querySelector(T)??x.querySelector("option:not([disabled])");$=W&&zt(W)}ot($),Me!==null&&N.add(Me)}),pa(()=>{var O=C();if(x===document.activeElement){var T=ga??Me;if(N.has(T))return}if(_r(x,O,X),X&&O===void 0){var $=x.querySelector(":checked");$!==null&&(O=zt($),ot(O))}x.__value=O,X=!1}),ja(x)}function zt(x){return"__value"in x?x.__value:x.value}var qa=p('<div class="text-center py-12 text-gray-500"><p class="mb-4">ë“±ë¡ëœ í€˜ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p> <p class="text-sm">ìœ„ì˜ "+ í€˜ìŠ¤íŠ¸ ì¶”ê°€" ë²„íŠ¼ìœ¼ë¡œ í€˜ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p></div>'),za=p('<button class="px-3 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors cursor-pointer"> </button>'),Qa=p('<div class="w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden"><div></div></div>'),Ta=p('<div class="bg-white p-3 rounded border border-gray-200 text-sm text-gray-600 mb-3"> </div>'),Ra=p('<tr><td class="py-2 pr-2 text-gray-700 font-medium"> </td><td class="py-2 text-center text-gray-600"> </td><td class="py-2 text-center text-purple-600"> </td><td class="py-2 pl-2 text-gray-500"> </td></tr>'),Ea=p('<div class="bg-gray-50 rounded-lg border border-gray-200 p-4"><div class="flex justify-between items-start mb-3"><h4 class="font-medium text-gray-900"> </h4> <div class="flex gap-2"><span class="text-xs font-bold bg-white border border-gray-200 px-2 py-1 rounded text-gray-600"> </span> <span class="text-xs font-bold bg-purple-100 border border-purple-200 px-2 py-1 rounded text-purple-700"> </span></div></div> <!> <table class="w-full text-xs"><thead><tr class="text-gray-500 border-b border-gray-200"><th class="py-2 text-left">í•­ëª©</th><th class="py-2 text-center w-10">H</th><th class="py-2 text-center w-10">G</th><th class="py-2 text-left">í”¼ë“œë°±</th></tr></thead><tbody class="divide-y divide-gray-200"></tbody></table></div>'),Aa=p('<h3 class="font-medium text-purple-800 mb-4 flex items-center gap-2"><span class="w-2 h-6 bg-purple-600 rounded-full"></span> LMS ë£¨ë¸Œë¦­ í‰ê°€</h3> <div class="space-y-6"></div>',1),Ca=p('<div class="text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-gray-200 border-dashed"><p>ë£¨ë¸Œë¦­ í‰ê°€ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>'),Ba=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4"><div class="bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col"><div class="p-5 border-b border-gray-200 flex justify-between items-center"><h2 class="text-lg font-bold text-gray-800"> </h2> <button class="text-gray-400 hover:text-gray-600 p-1">âœ•</button></div> <div class="p-6 overflow-y-auto"><!></div></div></div>'),Oa=p('<div><div class="flex items-center gap-3 flex-1"><input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer flex-shrink-0"/> <button class="flex-1 text-left cursor-pointer"><div class="flex items-center gap-3"><span class="text-lg font-bold text-gray-400"> </span> <div><span class="font-medium text-gray-800"> </span> <div class="flex items-center gap-2 mt-1 text-xs"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 rounded"> </span> <span class="text-gray-400"> </span> <span class="text-gray-400">Â·</span> <span> </span> <!> <!></div></div></div></button></div> <div class="flex gap-1 ml-4"><button class="p-2 text-gray-400 hover:text-blue-600 cursor-pointer text-sm">ìˆ˜ì •</button> <button class="p-2 text-gray-400 hover:text-red-600 cursor-pointer text-sm">ì‚­ì œ</button></div></div>'),Ua=p('<div class="flex items-center justify-between mb-3 px-1"><label class="flex items-center gap-2 cursor-pointer select-none"><input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"/> <span class="text-sm text-gray-600"> </span></label> <!></div> <div class="space-y-3"></div>',1),Ga=p("<option> </option>"),Na=p("<option> </option>"),Pa=p('<input type="text" placeholder="ì¹´í…Œê³ ë¦¬ ì…ë ¥" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>'),Ha=p('<div class="text-center py-8 text-gray-400 text-sm">ë¶€ì—¬ëœ ë¹„ì •ê·œ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>'),Fa=p('<tr class="hover:bg-gray-50"><td class="px-3 py-2 font-medium text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-center font-bold text-green-600"> </td><td class="px-3 py-2 text-xs text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-gray-600 max-w-full lg:max-w-[100px] truncate"> </td><td class="px-3 py-2 text-center"><button class="text-red-400 hover:text-red-600 cursor-pointer text-xs">ì‚­ì œ</button></td></tr>'),Ka=p('<div class="bg-white rounded-lg border border-gray-200 overflow-hidden"><div class="max-h-[calc(100vh-400px)] overflow-y-auto"><table class="w-full text-sm"><thead class="bg-gray-50 sticky top-0"><tr><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">í•™ìƒ</th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500">ì ìˆ˜</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì¹´í…Œê³ ë¦¬</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì‚¬ìœ </th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500 w-10"></th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div></div>'),Va=p('<div class="p-4 text-center text-gray-500 text-sm">í™œì„± í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>'),Wa=p('<li class="px-4 py-3 flex items-center justify-between gap-3 hover:bg-gray-50"><button class="text-left min-w-0 flex-1 group cursor-pointer"><span class="font-medium text-gray-800 block truncate"> </span> <span class="text-xs text-gray-400 group-hover:text-blue-600">ìƒì„¸ë³´ê¸° &rarr;</span></button> <button class="shrink-0 px-3 py-1.5 text-xs font-medium rounded-md border border-red-200 text-red-600 hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer"> </button></li>'),Ya=p('<ul class="divide-y divide-gray-100"></ul>'),Za=p('<div class="p-4 text-center text-gray-500 text-sm">ë¹„í™œì„± í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>'),Ja=p('<li class="px-4 py-3 flex items-center justify-between gap-3 hover:bg-gray-50"><button class="text-left min-w-0 flex-1 group cursor-pointer"><span class="font-medium text-gray-800 block truncate"> </span> <span class="text-xs text-gray-400 group-hover:text-blue-600">ìƒì„¸ë³´ê¸° &rarr;</span></button> <button class="shrink-0 px-3 py-1.5 text-xs font-medium rounded-md border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors cursor-pointer"> </button></li>'),Xa=p('<ul class="divide-y divide-gray-100"></ul>'),ts=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-4"> </h2> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">í€˜ìŠ¤íŠ¸ ë²ˆí˜¸</label> <input type="number" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ìœ í˜•</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>ì„œë¸Œí€˜ìŠ¤íŠ¸ (0~1)</option><option>ë©”ì¸í€˜ìŠ¤íŠ¸ (0~5)</option><option>ë°ì´í„°í†¤ (0~10)</option><option>ì•„ì´ë””ì–´í†¤ (0~20)</option></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì œëª© (ì„ íƒ)</label> <input type="text" placeholder="ì˜ˆ: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ì´ˆ" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer">ì·¨ì†Œ</button> <button type="submit" class="flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:opacity-50 cursor-pointer"> </button></div></form></div></div>'),es=p("<li> </li>"),rs=p('<div class="mt-2 pt-2 border-t border-yellow-200"><p class="text-xs font-medium text-yellow-700 mb-1"> </p> <ul class="text-xs text-yellow-600 space-y-0.5 max-h-24 overflow-y-auto"></ul></div>'),as=p('<div><p>ê°€ì ¸ì˜¤ê¸° ê²°ê³¼</p> <div class="grid grid-cols-2 gap-1 text-xs"><span class="text-gray-600">í€˜ìŠ¤íŠ¸ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">í€˜ìŠ¤íŠ¸ ê°±ì‹ :</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ê°±ì‹ :</span> <span class="font-medium"> </span></div> <!></div>'),ss=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-1">ğŸ“¥ ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</h2> <p class="text-xs text-gray-500 mb-4">Google ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì˜ "í€˜ìŠ¤íŠ¸" ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ëª©ë¡ê³¼ ì ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” ID</label> <input type="text" placeholder="https://docs.google.com/spreadsheets/d/... ë˜ëŠ” ID" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì‹œíŠ¸ ì´ë¦„</label> <input type="text" placeholder="í€˜ìŠ¤íŠ¸" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/> <p class="text-xs text-gray-400 mt-1">ê¸°ë³¸ê°’: "í€˜ìŠ¤íŠ¸"</p></div> <!> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer"> </button> <button type="button" class="flex-1 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 cursor-pointer"> </button></div></div></div></div>'),os=p('<div class="max-w-[1600px] mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><button class="text-sm text-blue-600 hover:text-blue-800 mb-2 cursor-pointer">â† ê³¼ì • ëª©ë¡</button> <h1 class="text-2xl font-bold text-gray-800">í€˜ìŠ¤íŠ¸ ê´€ë¦¬</h1></div> <div class="flex flex-col lg:flex-row gap-6 items-start"><div class="flex-1 min-w-0"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4"><h2 class="text-lg font-semibold text-gray-700">í€˜ìŠ¤íŠ¸ ëª©ë¡</h2> <div class="flex flex-col sm:flex-row gap-2"><button class="px-3 py-2 text-sm border border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-colors cursor-pointer">ğŸ“¥ ì‹œíŠ¸ì—ì„œ ê°€ì ¸ì˜¤ê¸°</button> <button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer">+ í€˜ìŠ¤íŠ¸ ì¶”ê°€</button></div></div> <!></div> <div class="w-full lg:w-[380px] flex-shrink-0 lg:sticky lg:top-6"><h2 class="text-lg font-semibold text-gray-700 mb-4">ë¹„ì •ê·œ ì ìˆ˜ ê´€ë¦¬</h2> <div class="bg-white rounded-lg border border-gray-200 p-4 mb-4"><h3 class="text-sm font-medium text-gray-700 mb-3">ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬</h3> <div class="space-y-3"><div><label class="block text-xs text-gray-500 mb-1">í•™ìƒ</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>í•™ìƒ ì„ íƒ</option><!></select></div> <div class="flex flex-col sm:flex-row gap-3"><div class="w-20"><label class="block text-xs text-gray-500 mb-1">ì ìˆ˜</label> <input type="number" step="0.5" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex-1 space-y-2"><div><label class="block text-xs text-gray-500 mb-1">ì¹´í…Œê³ ë¦¬</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div> <!> <div><input type="text" placeholder="ìƒì„¸ ì‚¬ìœ  (ì„ íƒ)" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <button class="w-full px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors cursor-pointer"> </button></div></div> <!></div> <div class="mt-6"><h2 class="text-lg font-semibold text-gray-700 mb-4">í•™ìƒ ëª©ë¡</h2> <div class="bg-white rounded-lg border border-gray-200 overflow-hidden"><div class="border-b border-gray-200 overflow-x-auto"><div class="flex min-w-max"><button> </button> <button> </button></div></div> <div class="max-h-[300px] overflow-y-auto"><!></div></div></div></div></div> <!> <!>',1);function ks(x,C){ma(C,!0);const ot=()=>La(Ma,"$isLoggedIn",N),[N,X]=Ia();let O=c(!0),T=c(at([])),$=cr(()=>Da.params.courseId),W=c(!1),Qt=c(!1),pt=c(1),_t=c("main"),xt=c(""),bt=c(at(new Date().toISOString().split("T")[0])),tt=c(null),z=c(at(new Set)),Tt=c(!1),Te=cr(()=>t(T).length>0&&t(z).size===t(T).length);function xr(a){const l=new Set(t(z));l.has(a)?l.delete(a):l.add(a),o(z,l,!0)}function br(){t(Te)?o(z,new Set,!0):o(z,new Set(t(T).map(a=>a.id)),!0)}async function fr(){if(t(z).size===0)return;const a=t(z).size;if(confirm(`ì„ íƒí•œ ${a}ê°œ í€˜ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì—°ê´€ëœ ì ìˆ˜ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.`)){o(Tt,!0);try{await A.post(`/api/v1/facilitator/courses/${t($)}/quests/batch-delete`,{quest_ids:[...t(z)]}),w(`${a}ê°œ í€˜ìŠ¤íŠ¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`,"success"),o(z,new Set,!0),await wt()}catch{w("í€˜ìŠ¤íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(Tt,!1)}}}let Yt=c(!1),ft=c(""),Rt=c("í€˜ìŠ¤íŠ¸"),Et=c(!1),R=c(null),Re=c(at([])),At=c(at([])),Ct=c(at([])),gt=c("active"),lt=c(null),Zt=c(at([])),Jt=c(!1),mt=c(null),yt=c(0),it=c("í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),Bt=c(""),Ot=c(""),Ut=c(!1);const gr=["í¼ì‹¤ì¬ëŸ‰ì ìˆ˜","ì•„ë‚Œì—†ì´ ì£¼ëŠ” ê·¸ë£¨","ë””ìŠ¤ì½”ë“œ ì†Œí†µì™•","ì‰ë°¸ê·¸íˆ¬","ì§ì ‘ ì…ë ¥"];let Xt=c(!1),te=c(null),ee=c(!1),ht=c(null);async function Ee(a){o(te,a,!0),o(Xt,!0),o(ee,!0),o(ht,null);try{o(ht,await A.get(`/api/v1/facilitator/courses/${t($)}/students/${a.legacy_user_id}/rubrics`),!0)}catch{w("ë£¨ë¸Œë¦­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(ee,!1)}}ca(async()=>{if(!ot()){qe(`${ze}/login`);return}A.post(`/api/v1/admin/sync/students/${t($)}`).catch(()=>{}),await Promise.all([wt(),Ae(),re()])});async function wt(){o(O,!0);try{o(T,await A.get(`/api/v1/facilitator/courses/${t($)}/quests`),!0),o(z,new Set,!0)}catch{w("í€˜ìŠ¤íŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(O,!1)}}async function Ae(){try{const[a,l]=await Promise.all([A.get(`/api/v1/facilitator/courses/${t($)}/students?active=true`),A.get(`/api/v1/facilitator/courses/${t($)}/students?active=false`)]);o(At,a,!0),o(Ct,l,!0),o(Re,a,!0)}catch{}}async function Ce(a){o(lt,a,!0);try{const l=await A.patch(`/api/v1/facilitator/courses/${t($)}/students/${a}/active`);w(l.is_active?"í•™ìƒì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.":"í•™ìƒì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.","success"),await Ae()}catch{w("í•™ìƒ ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(lt,null)}}async function re(){o(Jt,!0);try{o(Zt,await A.get(`/api/v1/facilitator/courses/${t($)}/bonus-scores`),!0)}catch{w("ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(Jt,!1)}}async function mr(){let a=t(it);if(t(it)==="ì§ì ‘ ì…ë ¥"&&(a=t(Bt).trim()),!t(mt)||t(yt)<=0||!a){w("í•™ìƒ, ì ìˆ˜, ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(Ut,!0);try{await A.post(`/api/v1/facilitator/courses/${t($)}/bonus-scores`,{legacy_student_id:t(mt),score:t(yt),category:a,reason:t(Ot).trim()}),w("ë¹„ì •ê·œ ì ìˆ˜ê°€ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success"),o(mt,null),o(yt,0),o(Ot,""),o(it,"í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),o(Bt,""),await re()}catch{w("ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(Ut,!1)}}async function yr(a){if(confirm("ì´ ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await A.del(`/api/v1/facilitator/bonus-scores/${a}`),w("ë¹„ì •ê·œ ì ìˆ˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success"),await re()}catch{w("ë¹„ì •ê·œ ì ìˆ˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}function hr(a){const l=a.match(/\/spreadsheets\/d\/([a-zA-Z0-9_-]+)/);return l?l[1]:a.trim()}function wr(){o(ft,""),o(Rt,"í€˜ìŠ¤íŠ¸"),o(R,null),o(Yt,!0)}async function kr(){const a=hr(t(ft));if(!a){w("ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(Et,!0),o(R,null);try{const l=await A.post(`/api/v1/facilitator/courses/${t($)}/import-sheet`,{spreadsheet_id:a,sheet_name:t(Rt).trim()||"í€˜ìŠ¤íŠ¸"});o(R,l,!0),w(`ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ: í€˜ìŠ¤íŠ¸ ${l.quests_created}ê°œ ìƒì„±, ${l.quests_updated}ê°œ ê°±ì‹  / ì ìˆ˜ ${l.scores_created}ê°œ ìƒì„±, ${l.scores_updated}ê°œ ê°±ì‹ `,l.errors.length>0?"error":"success"),await wt()}catch{w("ì‹œíŠ¸ ê°€ì ¸ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(Et,!1)}}function Sr(){o(tt,null),o(pt,t(T).length>0?Math.max(...t(T).map(a=>a.quest_number))+1:1,!0),o(_t,"main"),o(xt,""),o(bt,new Date().toISOString().split("T")[0],!0),o(W,!0)}function $r(a){o(tt,a,!0),o(pt,a.quest_number,!0),o(_t,a.quest_type,!0),o(xt,a.title||"",!0),o(bt,a.quest_date,!0),o(W,!0)}async function Ir(){o(Qt,!0);try{const a={quest_number:t(pt),quest_type:t(_t),title:t(xt).trim()||null,quest_date:t(bt)};t(tt)?(await A.put(`/api/v1/facilitator/quests/${t(tt).id}`,a),w("í€˜ìŠ¤íŠ¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.","success")):(await A.post(`/api/v1/facilitator/courses/${t($)}/quests`,a),w("í€˜ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.","success")),o(W,!1),await wt()}catch{w(t(tt)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.":"í€˜ìŠ¤íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(Qt,!1)}}async function Lr(a){if(confirm(`"${a.title||`#${a.quest_number}`}" í€˜ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`))try{await A.del(`/api/v1/facilitator/quests/${a.id}`),w("í€˜ìŠ¤íŠ¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success"),await wt()}catch{w("í€˜ìŠ¤íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}var Be=os(),ae=Z(Be),se=r(ae),Dr=r(se);Dr.__click=()=>qe(`${ze}/facilitator`),Wt(2),e(se);var Oe=s(se,2),oe=r(Oe),le=r(oe),Ue=s(r(le),2),Ge=r(Ue);Ge.__click=wr;var Mr=s(Ge,2);Mr.__click=Sr,e(Ue),e(le);var jr=s(le,2);{var qr=a=>{je(a,{type:"card",lines:4})},zr=a=>{var l=qt(),_=Z(l);{var I=d=>{var v=qa();u(d,v)},k=d=>{var v=Ua(),M=Z(v),b=r(M),y=r(b);P(y),y.__change=br;var h=s(y,2),f=r(h);e(h),e(b);var j=s(b,2);{var m=g=>{var i=za();i.__click=fr;var q=r(i,!0);e(i),S(()=>{i.disabled=t(Tt),n(q,t(Tt)?"ì‚­ì œ ì¤‘...":`ì„ íƒ ì‚­ì œ (${t(z).size})`)}),u(g,i)};L(j,g=>{t(z).size>0&&g(m)})}e(M);var E=s(M,2);K(E,21,()=>[...t(T)].sort((g,i)=>g.quest_number-i.quest_number),V,(g,i)=>{var q=Oa(),B=r(q),Q=r(B);P(Q),Q.__change=()=>xr(t(i).id);var U=s(Q,2);U.__click=()=>qe(`${ze}/facilitator/quests/${t(i).id}`);var G=r(U),D=r(G),et=r(D);e(D);var Pt=s(D,2),nt=r(Pt),fe=r(nt,!0);e(nt);var Ht=s(nt,2),St=r(Ht),$t=r(St,!0);e(St);var rt=s(St,2),It=r(rt,!0);e(rt);var dt=s(rt,4),Ft=r(dt);e(dt);var Kt=s(dt,2);{var ge=H=>{var F=Qa(),Dt=r(F);e(F),S(()=>{st(Dt,1,`h-full rounded-full transition-all ${t(i).graded_count===t(i).total_students?"bg-green-500":"bg-blue-500"}`),$a(Dt,`width: ${t(i).graded_count/t(i).total_students*100}%`)}),u(H,F)};L(Kt,H=>{t(i).total_students>0&&H(ge)})}var Lt=s(Kt,2);{var me=H=>{var F=Ba(),Dt=r(F),ye=r(Dt),he=r(ye),Vr=r(he);e(he);var Wr=s(he,2);Wr.__click=()=>o(Xt,!1),e(ye);var rr=s(ye,2),Yr=r(rr);{var Zr=ut=>{je(ut,{type:"card",lines:3})},Jr=ut=>{var ar=qt(),Xr=Z(ar);{var ta=ct=>{var Vt=Aa(),sr=s(Z(Vt),2);K(sr,21,()=>t(ht).tasks,V,(ra,vt)=>{var we=Ea(),ke=r(we),Se=r(ke),aa=r(Se,!0);e(Se);var or=s(Se,2),$e=r(or),sa=r($e);e($e);var lr=s($e,2),oa=r(lr);e(lr),e(or),e(ke);var ir=s(ke,2);{var la=Mt=>{var Y=Ta(),jt=r(Y,!0);e(Y),S(()=>n(jt,t(vt).overall_feedback)),u(Mt,Y)};L(ir,Mt=>{t(vt).overall_feedback&&Mt(la)})}var nr=s(ir,2),dr=s(r(nr));K(dr,21,()=>t(vt).rubric_items,V,(Mt,Y)=>{var jt=Ra(),Ie=r(jt),ia=r(Ie,!0);e(Ie);var Le=s(Ie),na=r(Le,!0);e(Le);var De=s(Le),da=r(De,!0);e(De);var ur=s(De),ua=r(ur,!0);e(ur),e(jt),S(()=>{n(ia,t(Y).rubric_metric),n(na,t(Y).human_score??"-"),n(da,t(Y).gpt_score??"-"),n(ua,t(Y).feedback||"-")}),u(Mt,jt)}),e(dr),e(nr),e(we),S(()=>{n(aa,t(vt).task_title),n(sa,`H: ${t(vt).total_human??""}`),n(oa,`G: ${t(vt).total_gpt??""}`)}),u(ra,we)}),e(sr),u(ct,Vt)},ea=ct=>{var Vt=Ca();u(ct,Vt)};L(Xr,ct=>{t(ht)&&t(ht).tasks.length>0?ct(ta):ct(ea,!1)},!0)}u(ut,ar)};L(Yr,ut=>{t(ee)?ut(Zr):ut(Jr,!1)})}e(rr),e(Dt),e(F),S(()=>n(Vr,`${t(te).name??""} í•™ìƒ ìƒì„¸ ì •ë³´`)),u(H,F)};L(Lt,H=>{t(Xt)&&t(te)&&H(me)})}e(Ht),e(Pt),e(G),e(U),e(B);var tr=s(B,2),er=r(tr);er.__click=()=>$r(t(i));var Kr=s(er,2);Kr.__click=()=>Lr(t(i)),e(tr),e(q),S((H,F)=>{st(q,1,`bg-white rounded-lg border p-4 flex items-center justify-between hover:shadow-sm transition-shadow ${H??""}`),vr(Q,F),n(et,`#${t(i).quest_number??""}`),n(fe,t(i).title||pr[t(i).quest_type]),n($t,pr[t(i).quest_type]),n(It,t(i).quest_date),st(dt,1,Sa(t(i).graded_count===t(i).total_students&&t(i).total_students>0?"text-green-600 font-medium":"text-gray-500")),n(Ft,`ì±„ì  ${t(i).graded_count??""}/${t(i).total_students??""}`)},[()=>t(z).has(t(i).id)?"border-blue-400 bg-blue-50/30":"border-gray-200",()=>t(z).has(t(i).id)]),u(g,q)}),e(E),S(()=>{vr(y,t(Te)),n(f,`ì „ì²´ ì„ íƒ (${t(z).size??""}/${t(T).length??""})`)}),u(d,v)};L(_,d=>{t(T).length===0?d(I):d(k,!1)},!0)}u(a,l)};L(jr,a=>{t(O)?a(qr):a(zr,!1)})}e(oe);var ie=s(oe,2),ne=s(r(ie),2),Ne=s(r(ne),2),de=r(Ne),ue=s(r(de),2),ce=r(ue);ce.value=(ce.__value=null)??"";var Qr=s(ce);K(Qr,17,()=>t(Re),V,(a,l)=>{var _=Ga(),I=r(_,!0);e(_);var k={};S(()=>{n(I,t(l).name),k!==(k=t(l).legacy_user_id)&&(_.value=(_.__value=t(l).legacy_user_id)??"")}),u(a,_)}),e(ue),e(de);var ve=s(de,2),pe=r(ve),Pe=s(r(pe),2);P(Pe),e(pe);var He=s(pe,2),_e=r(He),xe=s(r(_e),2);K(xe,21,()=>gr,V,(a,l)=>{var _=Na(),I=r(_,!0);e(_);var k={};S(()=>{n(I,t(l)),k!==(k=t(l))&&(_.value=(_.__value=t(l))??"")}),u(a,_)}),e(xe),e(_e);var Fe=s(_e,2);{var Tr=a=>{var l=Pa();P(l),J(l,()=>t(Bt),_=>o(Bt,_)),u(a,l)};L(Fe,a=>{t(it)==="ì§ì ‘ ì…ë ¥"&&a(Tr)})}var Ke=s(Fe,2),Ve=r(Ke);P(Ve),e(Ke),e(He),e(ve);var Gt=s(ve,2);Gt.__click=mr;var Rr=r(Gt,!0);e(Gt),e(Ne),e(ne);var Er=s(ne,2);{var Ar=a=>{je(a,{type:"card",lines:3})},Cr=a=>{var l=qt(),_=Z(l);{var I=d=>{var v=Ha();u(d,v)},k=d=>{var v=Ka(),M=r(v),b=r(M),y=s(r(b));K(y,21,()=>t(Zt),V,(h,f)=>{var j=Fa(),m=r(j),E=r(m,!0);e(m);var g=s(m),i=r(g);e(g);var q=s(g),B=r(q,!0);e(q);var Q=s(q),U=r(Q,!0);e(Q);var G=s(Q),D=r(G);D.__click=()=>yr(t(f).id),e(G),e(j),S(et=>{ka(j,"title",`${t(f).given_by_name??""} Â· ${et??""}`),n(E,t(f).student_name),n(i,`+${t(f).score??""}`),n(B,t(f).category),n(U,t(f).reason)},[()=>new Date(t(f).given_at).toLocaleDateString("ko-KR")]),u(h,j)}),e(y),e(b),e(M),e(v),u(d,v)};L(_,d=>{t(Zt).length===0?d(I):d(k,!1)},!0)}u(a,l)};L(Er,a=>{t(Jt)?a(Ar):a(Cr,!1)})}e(ie);var We=s(ie,2),Ye=s(r(We),2),be=r(Ye),Ze=r(be),kt=r(Ze);kt.__click=()=>o(gt,"active");var Br=r(kt);e(kt);var Nt=s(kt,2);Nt.__click=()=>o(gt,"inactive");var Or=r(Nt);e(Nt),e(Ze),e(be);var Je=s(be,2),Ur=r(Je);{var Gr=a=>{var l=qt(),_=Z(l);{var I=d=>{var v=Va();u(d,v)},k=d=>{var v=Ya();K(v,21,()=>t(At),V,(M,b)=>{var y=Wa(),h=r(y);h.__click=()=>Ee(t(b));var f=r(h),j=r(f,!0);e(f),Wt(2),e(h);var m=s(h,2);m.__click=()=>Ce(t(b).legacy_user_id);var E=r(m,!0);e(m),e(y),S(()=>{n(j,t(b).name),m.disabled=t(lt)===t(b).legacy_user_id,n(E,t(lt)===t(b).legacy_user_id?"ì²˜ë¦¬ì¤‘...":"ë¹„í™œì„±í™”")}),u(M,y)}),e(v),u(d,v)};L(_,d=>{t(At).length===0?d(I):d(k,!1)})}u(a,l)},Nr=a=>{var l=qt(),_=Z(l);{var I=d=>{var v=Za();u(d,v)},k=d=>{var v=Xa();K(v,21,()=>t(Ct),V,(M,b)=>{var y=Ja(),h=r(y);h.__click=()=>Ee(t(b));var f=r(h),j=r(f,!0);e(f),Wt(2),e(h);var m=s(h,2);m.__click=()=>Ce(t(b).legacy_user_id);var E=r(m,!0);e(m),e(y),S(()=>{n(j,t(b).name),m.disabled=t(lt)===t(b).legacy_user_id,n(E,t(lt)===t(b).legacy_user_id?"ì²˜ë¦¬ì¤‘...":"í™œì„±í™”")}),u(M,y)}),e(v),u(d,v)};L(_,d=>{t(Ct).length===0?d(I):d(k,!1)})}u(a,l)};L(Ur,a=>{t(gt)==="active"?a(Gr):a(Nr,!1)})}e(Je),e(Ye),e(We),e(Oe),e(ae);var Xe=s(ae,2);{var Pr=a=>{var l=ts(),_=r(l),I=r(_),k=r(I,!0);e(I);var d=s(I,2),v=r(d),M=s(r(v),2);P(M),e(v);var b=s(v,2),y=s(r(b),2),h=r(y);h.value=h.__value="sub";var f=s(h);f.value=f.__value="main";var j=s(f);j.value=j.__value="datathon";var m=s(j);m.value=m.__value="ideathon",e(y),e(b);var E=s(b,2),g=s(r(E),2);P(g),e(E);var i=s(E,2),q=s(r(i),2);P(q),e(i);var B=s(i,2),Q=r(B);Q.__click=()=>o(W,!1);var U=s(Q,2),G=r(U,!0);e(U),e(B),e(d),e(_),e(l),S(()=>{n(k,t(tt)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •":"í€˜ìŠ¤íŠ¸ ì¶”ê°€"),U.disabled=t(Qt),n(G,t(Qt)?"ì €ì¥ ì¤‘...":t(tt)?"ìˆ˜ì •":"ì¶”ê°€")}),wa("submit",d,D=>{D.preventDefault(),Ir()}),J(M,()=>t(pt),D=>o(pt,D)),Qe(y,()=>t(_t),D=>o(_t,D)),J(g,()=>t(xt),D=>o(xt,D)),J(q,()=>t(bt),D=>o(bt,D)),u(a,l)};L(Xe,a=>{t(W)&&a(Pr)})}var Hr=s(Xe,2);{var Fr=a=>{var l=ss(),_=r(l),I=s(r(_),4),k=r(I),d=s(r(k),2);P(d),e(k);var v=s(k,2),M=s(r(v),2);P(M),Wt(2),e(v);var b=s(v,2);{var y=g=>{var i=as(),q=r(i),B=s(q,2),Q=s(r(B),2),U=r(Q);e(Q);var G=s(Q,4),D=r(G);e(G);var et=s(G,4),Pt=r(et);e(et);var nt=s(et,4),fe=r(nt);e(nt),e(B);var Ht=s(B,2);{var St=$t=>{var rt=rs(),It=r(rt),dt=r(It);e(It);var Ft=s(It,2);K(Ft,21,()=>t(R).errors,V,(Kt,ge)=>{var Lt=es(),me=r(Lt);e(Lt),S(()=>n(me,`Â· ${t(ge)??""}`)),u(Kt,Lt)}),e(Ft),e(rt),S(()=>n(dt,`ì˜¤ë¥˜ (${t(R).errors.length??""}ê±´):`)),u($t,rt)};L(Ht,$t=>{t(R).errors.length>0&&$t(St)})}e(i),S(()=>{st(i,1,`rounded-lg border p-3 ${t(R).errors.length>0?"border-yellow-300 bg-yellow-50":"border-green-300 bg-green-50"}`),st(q,1,`text-sm font-medium ${t(R).errors.length>0?"text-yellow-800":"text-green-800"} mb-2`),n(U,`${t(R).quests_created??""}ê°œ`),n(D,`${t(R).quests_updated??""}ê°œ`),n(Pt,`${t(R).scores_created??""}ê°œ`),n(fe,`${t(R).scores_updated??""}ê°œ`)}),u(g,i)};L(b,g=>{t(R)&&g(y)})}var h=s(b,2),f=r(h);f.__click=()=>o(Yt,!1);var j=r(f,!0);e(f);var m=s(f,2);m.__click=kr;var E=r(m,!0);e(m),e(h),e(I),e(_),e(l),S(g=>{n(j,t(R)?"ë‹«ê¸°":"ì·¨ì†Œ"),m.disabled=g,n(E,t(Et)?"ê°€ì ¸ì˜¤ëŠ” ì¤‘...":"ê°€ì ¸ì˜¤ê¸°")},[()=>t(Et)||!t(ft).trim()]),J(d,()=>t(ft),g=>o(ft,g)),J(M,()=>t(Rt),g=>o(Rt,g)),u(a,l)};L(Hr,a=>{t(Yt)&&a(Fr)})}S(()=>{Gt.disabled=t(Ut),n(Rr,t(Ut)?"ë¶€ì—¬ ì¤‘...":"+ ë¶€ì—¬"),st(kt,1,`px-4 py-2.5 text-sm font-medium border-b-2 transition-colors cursor-pointer ${t(gt)==="active"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`),n(Br,`í™œì„± í•™ìƒ (${t(At).length??""})`),st(Nt,1,`px-4 py-2.5 text-sm font-medium border-b-2 transition-colors cursor-pointer ${t(gt)==="inactive"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`),n(Or,`ë¹„í™œì„± í•™ìƒ (${t(Ct).length??""})`)}),Qe(ue,()=>t(mt),a=>o(mt,a)),J(Pe,()=>t(yt),a=>o(yt,a)),Qe(xe,()=>t(it),a=>o(it,a)),J(Ve,()=>t(Ot),a=>o(Ot,a)),u(x,Be),ya(),X()}ha(["click","change"]);export{ks as component};
