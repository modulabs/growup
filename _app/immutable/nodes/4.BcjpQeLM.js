import{a as v,f as b,c as Lt}from"../chunks/_V9dK3ok.js";import{o as br}from"../chunks/1hPTKaIJ.js";import{l as gr,an as mr,ai as yr,a0 as hr,ao as wr,ap as Sr,n as te,o as $r,p as kr,b as u,d as F,f as pt,t as D,g as t,a as Lr,e as o,c as a,s as l,h as Te,q as ee,r}from"../chunks/CcVkWGgp.js";import{d as qr,s as x,e as Mr}from"../chunks/Dap9sqf4.js";import{i as R}from"../chunks/BSGnc2-w.js";import{e as Z,i as H}from"../chunks/GjfVCmik.js";import{a as $,r as G,s as re,c as Tr}from"../chunks/By8uYFO7.js";import{s as ae}from"../chunks/CWDCDM9S.js";import{b as V}from"../chunks/CZzPbpj5.js";import{s as Cr,a as Dr}from"../chunks/Dn1l8nLM.js";import{p as Rr}from"../chunks/DwlKVeiZ.js";import{g as Ce}from"../chunks/jWjJaWtc.js";import{b as De}from"../chunks/r8MRUDBB.js";import{a as E}from"../chunks/aLVwqcnk.js";import{i as Er}from"../chunks/3jTL0Oy-.js";import{Q as Ir}from"../chunks/DqiXTygU.js";import{L as Qr}from"../chunks/C0NRKcx4.js";function Re(c,M,J=!1){if(c.multiple){if(M==null)return;if(!hr(M))return wr();for(var U of c.options)U.selected=M.includes(ft(U));return}for(U of c.options){var W=ft(U);if(Sr(W,M)){U.selected=!0;return}}(!J||M!==void 0)&&(c.selectedIndex=-1)}function zr(c){var M=new MutationObserver(()=>{Re(c,c.__value)});M.observe(c,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),yr(()=>{M.disconnect()})}function se(c,M,J=M){var U=new WeakSet,W=!0;gr(c,"change",z=>{var A=z?"[selected]":":checked",m;if(c.multiple)m=[].map.call(c.querySelectorAll(A),ft);else{var X=c.querySelector(A)??c.querySelector("option:not([disabled])");m=X&&ft(X)}J(m),te!==null&&U.add(te)}),mr(()=>{var z=M();if(c===document.activeElement){var A=$r??te;if(U.has(A))return}if(Re(c,z,W),W&&z===void 0){var m=c.querySelector(":checked");m!==null&&(z=ft(m),J(z))}c.__value=z,W=!1}),zr(c)}function ft(c){return"__value"in c?c.__value:c.value}var Br=b('<th class="px-1.5 py-1.5 text-center min-w-[120px]"><div class="flex flex-col items-center gap-1"><button class="text-xs font-semibold text-gray-700 hover:text-blue-700 cursor-pointer"> </button></div></th>'),Or=b('<tr><td class="px-3 py-6 text-center text-gray-500">ì ìˆ˜í‘œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</td></tr>'),Ur=b('<tr><td class="px-3 py-6 text-center text-gray-500">ì—´ ë + ë²„íŠ¼ìœ¼ë¡œ í€˜ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</td></tr>'),jr=b('<span class="text-[10px] text-blue-500">ì €ì¥</span>'),Ar=b('<span class="text-[10px] text-red-500">ì‹¤íŒ¨</span>'),Nr=b('<td class="px-1.5 py-1"><div class="flex items-center justify-center gap-1"><input type="text" inputmode="decimal" placeholder="-"/> <!></div></td>'),Pr=b('<tr class="hover:bg-gray-50/70"><td class="sticky left-0 z-10 bg-white px-2.5 py-1.5 font-medium text-gray-800"><button class="text-left hover:text-blue-700 cursor-pointer truncate max-w-[150px]"> </button></td><!><td class="px-1 py-1"></td></tr>'),Gr=b("<option> </option>"),Kr=b("<option> </option>"),Fr=b('<input type="text" placeholder="ì¹´í…Œê³ ë¦¬ ì…ë ¥" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>'),Vr=b('<div class="text-center py-8 text-gray-400 text-sm bg-white rounded-lg border border-gray-200">ë¶€ì—¬ëœ ë¹„ì •ê·œ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>'),Wr=b('<tr class="hover:bg-gray-50"><td class="px-3 py-2 font-medium text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-center font-bold text-green-600"> </td><td class="px-3 py-2 text-xs text-gray-800 max-w-full lg:max-w-[80px] truncate"> </td><td class="px-3 py-2 text-gray-600 max-w-full lg:max-w-[100px] truncate"> </td><td class="px-3 py-2 text-center"><button class="text-red-400 hover:text-red-600 cursor-pointer text-xs">ì‚­ì œ</button></td></tr>'),Yr=b('<div class="bg-white rounded-lg border border-gray-200 overflow-hidden"><div class="max-h-[360px] overflow-y-auto"><table class="w-full text-sm"><thead class="bg-gray-50 sticky top-0"><tr><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">í•™ìƒ</th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500">ì ìˆ˜</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì¹´í…Œê³ ë¦¬</th><th class="px-3 py-2 text-left text-xs font-medium text-gray-500">ì‚¬ìœ </th><th class="px-3 py-2 text-center text-xs font-medium text-gray-500 w-10"></th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div></div>'),Zr=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-4"> </h2> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">í€˜ìŠ¤íŠ¸ ë²ˆí˜¸</label> <input type="number" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ìœ í˜•</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>ì„œë¸Œí€˜ìŠ¤íŠ¸ (0~1)</option><option>ë©”ì¸í€˜ìŠ¤íŠ¸ (0~5)</option><option>ë°ì´í„°í†¤ (0~10)</option><option>ì•„ì´ë””ì–´í†¤ (0~20)</option></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì œëª© (ì„ íƒ)</label> <input type="text" placeholder="ì˜ˆ: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ì´ˆ" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ë‚ ì§œ</label> <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer">ì·¨ì†Œ</button> <button type="submit" class="flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 disabled:opacity-50 cursor-pointer"> </button></div></form></div></div>'),Hr=b("<li> </li>"),Jr=b('<div class="mt-2 pt-2 border-t border-yellow-200"><p class="text-xs font-medium text-yellow-700 mb-1"> </p> <ul class="text-xs text-yellow-600 space-y-0.5 max-h-24 overflow-y-auto"></ul></div>'),Xr=b('<div><p>ê°€ì ¸ì˜¤ê¸° ê²°ê³¼</p> <div class="grid grid-cols-2 gap-1 text-xs"><span class="text-gray-600">í€˜ìŠ¤íŠ¸ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">í€˜ìŠ¤íŠ¸ ê°±ì‹ :</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ìƒì„±:</span> <span class="font-medium"> </span> <span class="text-gray-600">ì ìˆ˜ ê°±ì‹ :</span> <span class="font-medium"> </span></div> <!></div>'),ta=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 p-6"><h2 class="text-lg font-bold text-gray-800 mb-1">ğŸ“¥ ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</h2> <p class="text-xs text-gray-500 mb-4">Google ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì˜ "í€˜ìŠ¤íŠ¸" ì‹œíŠ¸ì—ì„œ í€˜ìŠ¤íŠ¸ ëª©ë¡ê³¼ ì ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” ID</label> <input type="text" placeholder="https://docs.google.com/spreadsheets/d/... ë˜ëŠ” ID" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">ì‹œíŠ¸ ì´ë¦„</label> <input type="text" placeholder="í€˜ìŠ¤íŠ¸" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"/> <p class="text-xs text-gray-400 mt-1">ê¸°ë³¸ê°’: "í€˜ìŠ¤íŠ¸"</p></div> <!> <div class="flex gap-2 pt-2"><button type="button" class="flex-1 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 cursor-pointer"> </button> <button type="button" class="flex-1 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 cursor-pointer"> </button></div></div></div></div>'),ea=b('<div class="max-w-[1600px] mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><button class="text-sm text-blue-600 hover:text-blue-800 mb-2 cursor-pointer">â† ê³¼ì • ëª©ë¡</button> <h1 class="text-2xl font-bold text-gray-800">í€˜ìŠ¤íŠ¸ ê´€ë¦¬</h1></div> <div class="space-y-6"><div class="flex-1 min-w-0"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4"><h2 class="text-lg font-semibold text-gray-700">í•™ìƒ x í€˜ìŠ¤íŠ¸ ì ìˆ˜í‘œ</h2> <div class="flex flex-col sm:flex-row gap-2"><button class="px-3 py-2 text-sm border border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-colors cursor-pointer">ğŸ“¥ ì‹œíŠ¸ì—ì„œ ê°€ì ¸ì˜¤ê¸°</button> <button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer">+ í€˜ìŠ¤íŠ¸ ì¶”ê°€</button></div></div> <div class="rounded-lg border border-gray-200 bg-white overflow-hidden mb-3"><div class="overflow-auto"><table class="w-full min-w-[980px] text-sm"><thead class="bg-gray-50 border-b border-gray-200"><tr><th class="sticky left-0 z-10 bg-gray-50 px-2.5 py-1.5 text-left font-medium text-gray-600 min-w-[160px]">í•™ìƒ</th><!><th class="px-1.5 py-1.5 text-center min-w-[60px]"><button class="w-8 h-8 rounded-md border border-dashed border-gray-300 text-gray-500 hover:text-blue-600 hover:border-blue-400 cursor-pointer">+</button></th></tr></thead><tbody class="divide-y divide-gray-100"><!></tbody></table></div></div> <!></div> <div class="w-full"><h2 class="text-lg font-semibold text-gray-700 mb-4">ë¹„ì •ê·œ ì ìˆ˜ ê´€ë¦¬</h2> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 items-start"><div class="bg-white rounded-lg border border-gray-200 p-4"><h3 class="text-sm font-medium text-gray-700 mb-3">ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬</h3> <div class="space-y-3"><div><label class="block text-xs text-gray-500 mb-1">í•™ìƒ</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"><option>í•™ìƒ ì„ íƒ</option><!></select></div> <div class="flex flex-col sm:flex-row gap-3"><div class="w-20"><label class="block text-xs text-gray-500 mb-1">ì ìˆ˜</label> <input type="number" step="0.5" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div class="flex-1 space-y-2"><div><label class="block text-xs text-gray-500 mb-1">ì¹´í…Œê³ ë¦¬</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></select></div> <!> <div><input type="text" placeholder="ìƒì„¸ ì‚¬ìœ  (ì„ íƒ)" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div></div> <button class="w-full px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors cursor-pointer"> </button></div></div> <!></div></div> <!></div></div> <!> <!>',1);function ma(c,M){kr(M,!0);const J=()=>Dr(Er,"$isLoggedIn",U),[U,W]=Cr();let z=u(!0),A=u(F([])),m=Te(()=>Rr.params.courseId),X=u(!1),at=u(F({}));const oe=new Map;let tt=Te(()=>[...t(A)].sort((e,s)=>e.quest_number-s.quest_number));function _t(e,s){return`${e}:${s}`}function et(e,s){return t(at)[_t(e,s)]||{score:"",isSubmitted:!1,saving:!1,error:!1}}function xt(e,s,i){const n=_t(e,s);o(at,{...t(at),[n]:{...et(e,s),...i}},!0)}let st=u(!1),bt=u(!1),ot=u(1),lt=u("main"),it=u(""),nt=u(F(new Date().toISOString().split("T")[0])),Y=u(null),Ee=u(F(new Set)),qt=u(!1),ut=u(""),gt=u("í€˜ìŠ¤íŠ¸"),mt=u(!1),L=u(null),le=u(F([])),yt=u(F([])),Ie=u(F([])),Mt=u(F([])),Tt=u(!1),dt=u(null),ct=u(0),rt=u("í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),ht=u(""),wt=u(""),St=u(!1);const Qe=["í¼ì‹¤ì¬ëŸ‰ì ìˆ˜","ì•„ë‚Œì—†ì´ ì£¼ëŠ” ê·¸ë£¨","ë””ìŠ¤ì½”ë“œ ì†Œí†µì™•","ì‰ë°¸ê·¸íˆ¬","ì§ì ‘ ì…ë ¥"];let ze=u(!1),Be=u(null),ie=u(!1),ne=u(null);async function Oe(e){o(Be,e,!0),o(ze,!0),o(ie,!0),o(ne,null);try{o(ne,await E.get(`/api/v1/facilitator/courses/${t(m)}/students/${e.legacy_user_id}/rubrics`),!0)}catch{$("ë£¨ë¸Œë¦­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(ie,!1)}}br(async()=>{if(!J()){Ce(`${De}/login`);return}E.post(`/api/v1/admin/sync/students/${t(m)}`).catch(()=>{}),await Ct(),await Ue(),await Dt(),await Rt()});async function Ct(){o(z,!0);try{o(A,await E.get(`/api/v1/facilitator/courses/${t(m)}/quests`),!0),o(Ee,new Set,!0)}catch{$("í€˜ìŠ¤íŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(z,!1)}}async function Ue(){try{const[e,s]=await Promise.all([E.get(`/api/v1/facilitator/courses/${t(m)}/students?active=true`),E.get(`/api/v1/facilitator/courses/${t(m)}/students?active=false`)]);o(yt,e,!0),o(Ie,s,!0),o(le,e,!0)}catch{}}async function Dt(){if(t(tt).length===0||t(yt).length===0){o(at,{},!0);return}o(X,!0);try{const e={};await Promise.all(t(tt).map(async s=>{const i=await E.get(`/api/v1/facilitator/quests/${s.id}/students`);for(const n of i)t(yt).find(d=>d.legacy_user_id===n.legacy_student_id)&&(e[_t(n.legacy_student_id,s.id)]={score:n.score===null?"":String(n.score),isSubmitted:n.is_submitted,saving:!1,error:!1})})),o(at,e,!0)}catch{$("ì ìˆ˜ ë§¤íŠ¸ë¦­ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(X,!1)}}function je(e,s,i){const n=i.trim();n!==""&&!/^\d+(\.\d+)?$/.test(n)||(xt(e,s.id,{score:n,isSubmitted:n!=="",error:!1}),Ae(e,s.id,s.quest_type))}function Ae(e,s,i){const n=_t(e,s),d=oe.get(n);d&&clearTimeout(d),oe.set(n,setTimeout(()=>{Ne(e,s)},450))}async function Ne(e,s,i){const n=et(e,s);xt(e,s,{saving:!0,error:!1});try{const d=n.score===""?null:Number(n.score);await E.post(`/api/v1/facilitator/quests/${s}/scores`,{scores:[{legacy_student_id:e,score:d,is_submitted:d!==null}]}),xt(e,s,{saving:!1,error:!1,isSubmitted:d!==null})}catch{xt(e,s,{saving:!1,error:!0}),$("ì ìˆ˜ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}async function Rt(){o(Tt,!0);try{o(Mt,await E.get(`/api/v1/facilitator/courses/${t(m)}/bonus-scores`),!0)}catch{$("ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{o(Tt,!1)}}async function Pe(){let e=t(rt);if(t(rt)==="ì§ì ‘ ì…ë ¥"&&(e=t(ht).trim()),!t(dt)||t(ct)<=0||!e){$("í•™ìƒ, ì ìˆ˜, ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(St,!0);try{await E.post(`/api/v1/facilitator/courses/${t(m)}/bonus-scores`,{legacy_student_id:t(dt),score:t(ct),category:e,reason:t(wt).trim()}),$("ë¹„ì •ê·œ ì ìˆ˜ê°€ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success"),o(dt,null),o(ct,0),o(wt,""),o(rt,"í¼ì‹¤ì¬ëŸ‰ì ìˆ˜"),o(ht,""),await Rt()}catch{$("ë¹„ì •ê·œ ì ìˆ˜ ë¶€ì—¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(St,!1)}}async function Ge(e){if(confirm("ì´ ë¹„ì •ê·œ ì ìˆ˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await E.del(`/api/v1/facilitator/bonus-scores/${e}`),$("ë¹„ì •ê·œ ì ìˆ˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success"),await Rt()}catch{$("ë¹„ì •ê·œ ì ìˆ˜ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}function Ke(e){const s=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9_-]+)/);return s?s[1]:e.trim()}function Fe(){o(ut,""),o(gt,"í€˜ìŠ¤íŠ¸"),o(L,null),o(qt,!0)}async function Ve(){const e=Ke(t(ut));if(!e){$("ìŠ¤í”„ë ˆë“œì‹œíŠ¸ URL ë˜ëŠ” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}o(mt,!0),o(L,null);try{const s=await E.post(`/api/v1/facilitator/courses/${t(m)}/import-sheet`,{spreadsheet_id:e,sheet_name:t(gt).trim()||"í€˜ìŠ¤íŠ¸"});o(L,s,!0),$(`ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ: í€˜ìŠ¤íŠ¸ ${s.quests_created}ê°œ ìƒì„±, ${s.quests_updated}ê°œ ê°±ì‹  / ì ìˆ˜ ${s.scores_created}ê°œ ìƒì„±, ${s.scores_updated}ê°œ ê°±ì‹ `,s.errors.length>0?"error":"success"),await Ct(),await Dt()}catch{$("ì‹œíŠ¸ ê°€ì ¸ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(mt,!1)}}function ue(){o(Y,null),o(ot,t(A).length>0?Math.max(...t(A).map(e=>e.quest_number))+1:1,!0),o(lt,"main"),o(it,""),o(nt,new Date().toISOString().split("T")[0],!0),o(st,!0)}function We(e){o(Y,e,!0),o(ot,e.quest_number,!0),o(lt,e.quest_type,!0),o(it,e.title||"",!0),o(nt,e.quest_date,!0),o(st,!0)}async function Ye(){o(bt,!0);try{const e={quest_number:t(ot),quest_type:t(lt),title:t(it).trim()||null,quest_date:t(nt)};t(Y)?(await E.put(`/api/v1/facilitator/quests/${t(Y).id}`,e),$("í€˜ìŠ¤íŠ¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.","success")):(await E.post(`/api/v1/facilitator/courses/${t(m)}/quests`,e),$("í€˜ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.","success")),o(st,!1),await Ct(),await Dt()}catch{$(t(Y)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.":"í€˜ìŠ¤íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}finally{o(bt,!1)}}var de=ea(),Et=pt(de),It=a(Et),Ze=a(It);Ze.__click=()=>Ce(`${De}/facilitator`),ee(2),r(It);var ce=l(It,2),Qt=a(ce),zt=a(Qt),ve=l(a(zt),2),pe=a(ve);pe.__click=Fe;var He=l(pe,2);He.__click=ue,r(ve),r(zt);var Bt=l(zt,2),fe=a(Bt),_e=a(fe),Ot=a(_e),xe=a(Ot),be=l(a(xe));Z(be,17,()=>t(tt),H,(e,s)=>{var i=Br(),n=a(i),d=a(n);d.__click=()=>We(t(s));var p=a(d,!0);r(d),r(n),r(i),D(()=>x(p,t(s).title||`${Ir[t(s).quest_type]} #${t(s).quest_number}`)),v(e,i)});var ge=l(be),Je=a(ge);Je.__click=ue,r(ge),r(xe),r(Ot);var me=l(Ot),Xe=a(me);{var tr=e=>{var s=Or(),i=a(s);r(s),D(()=>re(i,"colspan",t(tt).length+2)),v(e,s)},er=e=>{var s=Lt(),i=pt(s);{var n=p=>{var f=Ur(),I=a(f);re(I,"colspan",2),r(f),v(p,f)},d=p=>{var f=Lt(),I=pt(f);Z(I,17,()=>t(yt),H,(B,y)=>{var Q=Pr(),_=a(Q),q=a(_);q.__click=()=>Oe(t(y));var T=a(q,!0);r(q),r(_);var N=l(_);Z(N,17,()=>t(tt),H,(g,h)=>{var C=Nr(),O=a(C),w=a(O);G(w),w.__input=S=>je(t(y).legacy_user_id,t(h),S.currentTarget.value);var P=l(w,2);{var j=S=>{var K=jr();v(S,K)},k=S=>{var K=Lt(),kt=pt(K);{var Wt=vt=>{var Yt=Ar();v(vt,Yt)};R(kt,vt=>{et(t(y).legacy_user_id,t(h).id).error&&vt(Wt)},!0)}v(S,K)};R(P,S=>{et(t(y).legacy_user_id,t(h).id).saving?S(j):S(k,!1)})}r(O),r(C),D((S,K)=>{Tr(w,S),ae(w,1,K)},[()=>et(t(y).legacy_user_id,t(h).id).score,()=>`w-14 px-1.5 py-0.5 text-center border rounded text-xs focus:outline-none focus:ring-1 ${et(t(y).legacy_user_id,t(h).id).error?"border-red-400 focus:ring-red-200":"border-gray-300 focus:ring-blue-200"}`]),v(g,C)}),ee(),r(Q),D(()=>x(T,t(y).name)),v(B,Q)}),v(p,f)};R(i,p=>{t(tt).length===0?p(n):p(d,!1)},!0)}v(e,s)};R(Xe,e=>{t(z)||t(X)?e(tr):e(er,!1)})}r(me),r(_e),r(fe),r(Bt);var rr=l(Bt,2);R(rr,e=>{}),r(Qt);var Ut=l(Qt,2),ye=l(a(Ut),2),jt=a(ye),he=l(a(jt),2),At=a(he),Nt=l(a(At),2),Pt=a(Nt);Pt.value=(Pt.__value=null)??"";var ar=l(Pt);Z(ar,17,()=>t(le),H,(e,s)=>{var i=Gr(),n=a(i,!0);r(i);var d={};D(()=>{x(n,t(s).name),d!==(d=t(s).legacy_user_id)&&(i.value=(i.__value=t(s).legacy_user_id)??"")}),v(e,i)}),r(Nt),r(At);var Gt=l(At,2),Kt=a(Gt),we=l(a(Kt),2);G(we),r(Kt);var Se=l(Kt,2),Ft=a(Se),Vt=l(a(Ft),2);Z(Vt,21,()=>Qe,H,(e,s)=>{var i=Kr(),n=a(i,!0);r(i);var d={};D(()=>{x(n,t(s)),d!==(d=t(s))&&(i.value=(i.__value=t(s))??"")}),v(e,i)}),r(Vt),r(Ft);var $e=l(Ft,2);{var sr=e=>{var s=Fr();G(s),V(s,()=>t(ht),i=>o(ht,i)),v(e,s)};R($e,e=>{t(rt)==="ì§ì ‘ ì…ë ¥"&&e(sr)})}var ke=l($e,2),Le=a(ke);G(Le),r(ke),r(Se),r(Gt);var $t=l(Gt,2);$t.__click=Pe;var or=a($t,!0);r($t),r(he),r(jt);var lr=l(jt,2);{var ir=e=>{Qr(e,{type:"card",lines:3})},nr=e=>{var s=Lt(),i=pt(s);{var n=p=>{var f=Vr();v(p,f)},d=p=>{var f=Yr(),I=a(f),B=a(I),y=l(a(B));Z(y,21,()=>t(Mt),H,(Q,_)=>{var q=Wr(),T=a(q),N=a(T,!0);r(T);var g=l(T),h=a(g);r(g);var C=l(g),O=a(C,!0);r(C);var w=l(C),P=a(w,!0);r(w);var j=l(w),k=a(j);k.__click=()=>Ge(t(_).id),r(j),r(q),D(S=>{re(q,"title",`${t(_).given_by_name??""} Â· ${S??""}`),x(N,t(_).student_name),x(h,`+${t(_).score??""}`),x(O,t(_).category),x(P,t(_).reason)},[()=>new Date(t(_).given_at).toLocaleDateString("ko-KR")]),v(Q,q)}),r(y),r(B),r(I),r(f),v(p,f)};R(i,p=>{t(Mt).length===0?p(n):p(d,!1)},!0)}v(e,s)};R(lr,e=>{t(Tt)?e(ir):e(nr,!1)})}r(ye),r(Ut);var ur=l(Ut,2);R(ur,e=>{}),r(ce),r(Et);var qe=l(Et,2);{var dr=e=>{var s=Zr(),i=a(s),n=a(i),d=a(n,!0);r(n);var p=l(n,2),f=a(p),I=l(a(f),2);G(I),r(f);var B=l(f,2),y=l(a(B),2),Q=a(y);Q.value=Q.__value="sub";var _=l(Q);_.value=_.__value="main";var q=l(_);q.value=q.__value="datathon";var T=l(q);T.value=T.__value="ideathon",r(y),r(B);var N=l(B,2),g=l(a(N),2);G(g),r(N);var h=l(N,2),C=l(a(h),2);G(C),r(h);var O=l(h,2),w=a(O);w.__click=()=>o(st,!1);var P=l(w,2),j=a(P,!0);r(P),r(O),r(p),r(i),r(s),D(()=>{x(d,t(Y)?"í€˜ìŠ¤íŠ¸ ìˆ˜ì •":"í€˜ìŠ¤íŠ¸ ì¶”ê°€"),P.disabled=t(bt),x(j,t(bt)?"ì €ì¥ ì¤‘...":t(Y)?"ìˆ˜ì •":"ì¶”ê°€")}),Mr("submit",p,k=>{k.preventDefault(),Ye()}),V(I,()=>t(ot),k=>o(ot,k)),se(y,()=>t(lt),k=>o(lt,k)),V(g,()=>t(it),k=>o(it,k)),V(C,()=>t(nt),k=>o(nt,k)),v(e,s)};R(qe,e=>{t(st)&&e(dr)})}var cr=l(qe,2);{var vr=e=>{var s=ta(),i=a(s),n=l(a(i),4),d=a(n),p=l(a(d),2);G(p),r(d);var f=l(d,2),I=l(a(f),2);G(I),ee(2),r(f);var B=l(f,2);{var y=g=>{var h=Xr(),C=a(h),O=l(C,2),w=l(a(O),2),P=a(w);r(w);var j=l(w,4),k=a(j);r(j);var S=l(j,4),K=a(S);r(S);var kt=l(S,4),Wt=a(kt);r(kt),r(O);var vt=l(O,2);{var Yt=Zt=>{var Ht=Jr(),Jt=a(Ht),pr=a(Jt);r(Jt);var Me=l(Jt,2);Z(Me,21,()=>t(L).errors,H,(fr,_r)=>{var Xt=Hr(),xr=a(Xt);r(Xt),D(()=>x(xr,`Â· ${t(_r)??""}`)),v(fr,Xt)}),r(Me),r(Ht),D(()=>x(pr,`ì˜¤ë¥˜ (${t(L).errors.length??""}ê±´):`)),v(Zt,Ht)};R(vt,Zt=>{t(L).errors.length>0&&Zt(Yt)})}r(h),D(()=>{ae(h,1,`rounded-lg border p-3 ${t(L).errors.length>0?"border-yellow-300 bg-yellow-50":"border-green-300 bg-green-50"}`),ae(C,1,`text-sm font-medium ${t(L).errors.length>0?"text-yellow-800":"text-green-800"} mb-2`),x(P,`${t(L).quests_created??""}ê°œ`),x(k,`${t(L).quests_updated??""}ê°œ`),x(K,`${t(L).scores_created??""}ê°œ`),x(Wt,`${t(L).scores_updated??""}ê°œ`)}),v(g,h)};R(B,g=>{t(L)&&g(y)})}var Q=l(B,2),_=a(Q);_.__click=()=>o(qt,!1);var q=a(_,!0);r(_);var T=l(_,2);T.__click=Ve;var N=a(T,!0);r(T),r(Q),r(n),r(i),r(s),D(g=>{x(q,t(L)?"ë‹«ê¸°":"ì·¨ì†Œ"),T.disabled=g,x(N,t(mt)?"ê°€ì ¸ì˜¤ëŠ” ì¤‘...":"ê°€ì ¸ì˜¤ê¸°")},[()=>t(mt)||!t(ut).trim()]),V(p,()=>t(ut),g=>o(ut,g)),V(I,()=>t(gt),g=>o(gt,g)),v(e,s)};R(cr,e=>{t(qt)&&e(vr)})}D(()=>{$t.disabled=t(St),x(or,t(St)?"ë¶€ì—¬ ì¤‘...":"+ ë¶€ì—¬")}),se(Nt,()=>t(dt),e=>o(dt,e)),V(we,()=>t(ct),e=>o(ct,e)),se(Vt,()=>t(rt),e=>o(rt,e)),V(Le,()=>t(wt),e=>o(wt,e)),v(c,de),Lr(),W()}qr(["click","input","change"]);export{ma as component};
