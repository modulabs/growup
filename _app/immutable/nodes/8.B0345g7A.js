import{a as v,f as u,c as J}from"../chunks/_V9dK3ok.js";import{o as Ae}from"../chunks/1hPTKaIJ.js";import{p as Oe,t as Q,a as Ue,e as R,g as t,c as r,r as e,s,b as X,h as C,f as Y,q as kt}from"../chunks/CcVkWGgp.js";import{d as Fe,s as l}from"../chunks/Dap9sqf4.js";import{i as w}from"../chunks/BSGnc2-w.js";import{e as Z,i as tt}from"../chunks/GjfVCmik.js";import{a as Ke,s as et}from"../chunks/By8uYFO7.js";import{s as U}from"../chunks/DObsSMuQ.js";import{L as Ne,s as Ht}from"../chunks/Crjibkup.js";import{s as Ve,a as Jt}from"../chunks/Dn1l8nLM.js";import{p as We}from"../chunks/B1YlKK7_.js";import{g as Ye}from"../chunks/DUQp4yjs.js";import{b as Ge}from"../chunks/BzfUlKKA.js";import{a as Xt}from"../chunks/ES7LborG.js";import{i as He,a as Je}from"../chunks/3jTL0Oy-.js";import{S as rt,Q as Xe}from"../chunks/DqiXTygU.js";var Ze=u('<span class="ml-2 bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full text-xs"> </span>'),tr=u('<span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700">ì œì¶œë¨</span>'),er=u('<span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-400">ë¯¸ì œì¶œ</span>'),rr=u('<tr class="hover:bg-gray-50 transition-colors"><td class="px-4 py-2.5 font-medium text-gray-900"> </td><td class="px-4 py-2.5"><span> </span></td><td class="px-4 py-2.5 text-gray-700 font-medium"> </td><td class="px-4 py-2.5 text-gray-500"> </td><td class="px-4 py-2.5 text-center"><span> </span></td><td class="px-4 py-2.5 text-center"><!></td></tr>'),ar=u('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[680px]"><thead class="bg-gray-50"><tr><th class="px-4 py-2.5 text-left font-medium text-gray-600">í€˜ìŠ¤íŠ¸</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ìœ í˜•</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ì œëª©</th><th class="px-4 py-2.5 text-left font-medium text-gray-600">ë‚ ì§œ</th><th class="px-4 py-2.5 text-center font-medium text-gray-600">ì ìˆ˜</th><th class="px-4 py-2.5 text-center font-medium text-gray-600">ìƒíƒœ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),sr=u('<div class="text-center py-20 text-gray-500"><p>ë“±ë¡ëœ í€˜ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>'),or=u("<span>â˜…</span>"),ir=u('<div class="p-6"><div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between bg-purple-50/40 border border-purple-100 rounded-xl px-4 py-4"><h4 class="font-semibold text-gray-800 text-base sm:text-lg flex items-center gap-2"><span class="w-1.5 h-5 bg-purple-600 rounded-full"></span> </h4> <div class="flex items-center gap-3"><div class="flex items-center gap-1"></div> <span class="text-sm font-semibold text-gray-600"> </span></div></div></div>'),lr=u('<div class="divide-y divide-gray-100"></div>'),dr=u('<div class="text-center py-20 text-gray-500 bg-gray-50/50"><p class="mb-2">ë…¸ë“œ ì ìˆ˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p> <p class="text-sm text-gray-400">ì•„ì§ í‰ê°€ê°€ ì§„í–‰ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë°ì´í„°ê°€ ì—°ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p></div>'),nr=u('<tr class="hover:bg-amber-50/30 transition-colors"><td class="px-6 py-4 text-gray-800 font-medium"> </td><td class="px-6 py-4 text-gray-600"> </td><td class="px-6 py-4 text-center font-bold text-amber-600"> </td><td class="px-6 py-4 text-gray-500"> </td><td class="px-6 py-4 text-gray-400 text-xs"> </td></tr>'),vr=u('<div class="overflow-x-auto"><table class="w-full text-sm min-w-[720px]"><thead class="bg-amber-50/50"><tr><th class="px-6 py-3 text-left font-medium text-amber-900/60">ì¹´í…Œê³ ë¦¬</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ìƒì„¸ ì‚¬ìœ </th><th class="px-6 py-3 text-center font-medium text-amber-900/60">ì ìˆ˜</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë¶€ì—¬ì</th><th class="px-6 py-3 text-left font-medium text-amber-900/60">ë‚ ì§œ</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div>'),cr=u('<div class="text-center py-20 text-gray-500"><p>ë¹„ì •ê·œ ì ìˆ˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>'),xr=u('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"><div class="space-y-4"><div class="bg-gradient-to-r from-red-50 to-white rounded-xl border border-red-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-red-800 font-bold text-lg flex items-center gap-2">â¤ï¸ ì„±ì¥ ì˜¨ë„</h3> <p class="text-red-600 text-xs mt-1">ê¾¸ì¤€í•œ ì°¸ì—¬ì™€ ì„±ì·¨ì˜ ê²°ê³¼ì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-red-600"> </span></div> <div class="w-full bg-red-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-red-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg></div></div> <div class="bg-gradient-to-r from-orange-50 to-white rounded-xl border border-orange-100 p-6 relative overflow-hidden"><div class="flex justify-between items-end mb-2 relative z-10"><div><h3 class="text-orange-800 font-bold text-lg flex items-center gap-2">ğŸ”¥ ì—´ì • ì˜¨ë„</h3> <p class="text-orange-600 text-xs mt-1">ìµœê·¼ 2ì£¼ê°„ì˜ í™œë™ ì§€í‘œì…ë‹ˆë‹¤.</p></div> <span class="text-4xl font-black text-orange-500"> </span></div> <div class="w-full bg-orange-100 rounded-full h-4 mt-2 relative z-10"><div class="bg-gradient-to-r from-orange-400 to-orange-600 h-4 rounded-full transition-all duration-1000 shadow-sm"></div></div> <div class="absolute -right-6 -bottom-6 text-orange-100 opacity-50"><svg width="120" height="120" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 10c0-2.21-1.79-4-4-4s-4 1.79-4 4c0 .3.03.6.09.88.07-.02.14-.04.22-.04.83 0 1.5.67 1.5 1.5 0 .83-.67 1.5-1.5 1.5-.26 0-.5-.07-.72-.19-.4.92-.79 2.15-.79 3.35 0 2.76 2.24 5 5 5s5-2.24 5-5c0-2.3-1.63-4.25-3.8-4.82zM15 2c0 5 4 8 4 11 0 4.42-3.58 8-8 8S3 17.42 3 13c0-3 2-5 2-5s.5-.5 1.5 0c1 .5 2 2 2 2s-.5-4 2.5-6 3-2 4-2z"></path></svg></div></div></div> <div class="grid grid-cols-2 gap-4"><div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">í€˜ìŠ¤íŠ¸ ì§„í–‰ë¥ </div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-blue-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2"> </p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center items-center text-center"><div class="text-gray-500 text-sm font-medium mb-2">ë…¸ë“œ ì ìˆ˜</div> <div class="relative w-24 h-24 flex items-center justify-center"><svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" class="text-gray-100"></circle><circle cx="48" cy="48" r="40" stroke="currentColor" stroke-width="8" fill="transparent" stroke-dashoffset="0" class="text-purple-500 transition-all duration-1000"></circle></svg> <span class="absolute text-xl font-bold text-gray-700"> </span></div> <p class="text-xs text-gray-400 mt-2">í‰ê°€ ì™„ë£Œ</p></div> <div class="bg-white rounded-xl border border-gray-200 p-5 flex flex-col justify-center col-span-2"><p class="text-sm text-gray-500 font-medium mb-1">ì´ íšë“ ì ìˆ˜</p> <span class="text-4xl font-bold text-gray-800 mb-1"> </span> <div class="text-xs text-gray-400 flex flex-col gap-1"><span>í€˜ìŠ¤íŠ¸: <span class="text-blue-600 font-medium"> </span></span> <span>ë¹„ì •ê·œ: <span class="text-amber-600 font-medium"> </span></span></div></div></div></div> <div class="bg-white rounded-lg border border-gray-200 overflow-hidden min-h-[500px]"><div class="flex border-b border-gray-200"><button>í€˜ìŠ¤íŠ¸ ì ìˆ˜</button> <button>ë…¸ë“œ ì ìˆ˜</button> <button>ë¹„ì •ê·œ ì ìˆ˜ <!></button></div> <div class="p-0"><!> <!> <!></div></div>',1),pr=u('<div class="text-center py-12 text-gray-500"><p>ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></div>'),ur=u('<div class="max-w-4xl mx-auto px-3 py-6 sm:px-6"><div class="mb-6"><h1 class="text-2xl font-bold text-gray-800"> </h1></div> <!></div>');function Dr(Zt,te){Oe(te,!0);const ee=()=>Jt(Je,"$activeCourses",$t),re=()=>Jt(He,"$isLoggedIn",$t),[$t,ae]=Ve();let at=X(!0),c=X(null),D=X(null),st=C(()=>We.params.courseId),se=C(()=>{var a;return((a=ee().find(o=>String(o.legacy_course_id)===t(st)))==null?void 0:a.name)||"ê³¼ì •"}),I=C(()=>{var a;return((a=t(c))==null?void 0:a.scores.length)||0}),G=C(()=>{var a;return((a=t(c))==null?void 0:a.scores.filter(o=>o.is_submitted).length)||0}),oe=C(()=>{var a;return((a=t(D))==null?void 0:a.tasks.length)||0}),ie=C(()=>{var a;return((a=t(D))==null?void 0:a.tasks.reduce((o,d)=>o+d.total_human+d.total_gpt,0))||0}),le=C(()=>{var a;return((a=t(D))==null?void 0:a.tasks.reduce((o,d)=>o+d.rubric_items.length*2,0))||0}),qt=C(()=>{if(!t(c)||t(I)===0)return 0;const a=t(G)/t(I)*100;let o=0;t(c).scores.forEach(_=>{const B=rt[_.quest_type]||rt.main;o+=B.max});const d=t(c).total_quest_score+t(ie),f=o+t(le),m=f>0?d/f*100:0;return Math.round(a*.6+m*.4)}),Mt=C(()=>{if(!t(c))return 0;const a=new Date,o=new Date(a.getTime()-14*24*60*60*1e3),d=t(c).scores.filter(m=>{const _=new Date(m.quest_date);return _>=o&&_<=a});if(d.length===0)return 36.5;const f=d.filter(m=>m.is_submitted).length;return Math.round(f/d.length*100)}),k=X("quests");Ae(async()=>{if(!re()){Ye(`${Ge}/login`);return}await Promise.all([de(),ne()])});async function de(){R(at,!0);try{R(c,await Xt.get(`/api/v1/student/courses/${t(st)}/scores`),!0)}catch{Ke("ì ìˆ˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error")}finally{R(at,!1)}}async function ne(){try{R(D,await Xt.get(`/api/v1/student/courses/${t(st)}/rubrics`),!0)}catch(a){console.error("Failed to load rubrics:",a)}}function ve(a){switch(a){case"sub":return"bg-sky-50 text-sky-700 border-sky-200";case"main":return"bg-violet-50 text-violet-700 border-violet-200";case"datathon":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"ideathon":return"bg-rose-50 text-rose-700 border-rose-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}}function Ct(a,o){const d=(rt[a]||rt.main).max;if(o===null)return d;if(a==="main"&&o>d){if(o<=10)return 10;if(o<=20)return 20}return Math.max(d,o)}function ce(a,o,d){if(!o)return"bg-gray-100 text-gray-400 border-gray-200";if(a===null)return"bg-gray-100 text-gray-500 border-gray-200";const f=Ct(d,a),m=f>0?a/f:0;return m<=0?"bg-red-50 text-red-700 border-red-200":m<.4?"bg-orange-50 text-orange-700 border-orange-200":m<.75?"bg-amber-50 text-amber-700 border-amber-200":m<1?"bg-lime-50 text-lime-700 border-lime-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function xe(a,o,d){if(!o)return"ë¯¸ì œì¶œ";if(a===null)return"-";const f=Ct(d,a);return`${a} / ${f}`}function pe(a){try{return new Date(a).toLocaleDateString("ko-KR")}catch{return a}}function ot(a){return Math.max(0,Math.min(3,Math.round(a)))}var it=ur(),lt=r(it),St=r(lt),ue=r(St,!0);e(St),e(lt);var me=s(lt,2);{var ge=a=>{Ne(a,{type:"table",lines:5})},be=a=>{var o=J(),d=Y(o);{var f=_=>{var B=xr(),dt=Y(B),nt=r(dt),vt=r(nt),ct=r(vt),Lt=s(r(ct),2),fe=r(Lt);e(Lt),e(ct);var jt=s(ct,2),_e=r(jt);e(jt),kt(2),e(vt);var Dt=s(vt,2),xt=r(Dt),It=s(r(xt),2),ye=r(It);e(It),e(xt);var Tt=s(xt,2),he=r(Tt);e(Tt),kt(2),e(Dt),e(nt);var zt=s(nt,2),pt=r(zt),ut=s(r(pt),2),mt=r(ut),Et=s(r(mt));et(Et,"stroke-dasharray",2*Math.PI*40),e(mt);var Pt=s(mt,2),we=r(Pt);e(Pt),e(ut);var Qt=s(ut,2),ke=r(Qt);e(Qt),e(pt);var gt=s(pt,2),Rt=s(r(gt),2),bt=r(Rt),$e=s(r(bt));et($e,"stroke-dasharray",2*Math.PI*40),e(bt);var Bt=s(bt,2),qe=r(Bt);e(Bt),e(Rt),kt(2),e(gt);var At=s(gt,2),ft=s(r(At),2),Me=r(ft,!0);e(ft);var Ot=s(ft,2),_t=r(Ot),Ut=s(r(_t)),Ce=r(Ut,!0);e(Ut),e(_t);var Ft=s(_t,2),Kt=s(r(Ft)),Se=r(Kt);e(Kt),e(Ft),e(Ot),e(At),e(zt),e(dt);var Nt=s(dt,2),yt=r(Nt),ht=r(yt);ht.__click=()=>R(k,"quests");var wt=s(ht,2);wt.__click=()=>R(k,"rubrics");var H=s(wt,2);H.__click=()=>R(k,"bonus");var Le=s(r(H));{var je=x=>{var g=Ze(),T=r(g,!0);e(g),Q(()=>l(T,t(c).bonus_scores.length)),v(x,g)};w(Le,x=>{t(c).bonus_scores.length>0&&x(je)})}e(H),e(yt);var Vt=s(yt,2),Wt=r(Vt);{var De=x=>{var g=J(),T=Y(g);{var F=n=>{var p=ar(),z=r(p),h=s(r(z));Z(h,21,()=>t(c).scores,tt,(E,i)=>{var y=rr(),$=r(y),A=r($);e($);var b=s($),S=r(b),P=r(S,!0);e(S),e(b);var q=s(b),M=r(q,!0);e(q);var L=s(q),O=r(L,!0);e(L);var N=s(L),V=r(N),Ee=r(V,!0);e(V),e(N);var Gt=s(N),Pe=r(Gt);{var Qe=j=>{var W=tr();v(j,W)},Re=j=>{var W=er();v(j,W)};w(Pe,j=>{t(i).is_submitted?j(Qe):j(Re,!1)})}e(Gt),e(y),Q((j,W,Be)=>{l(A,`#${t(i).quest_number??""}`),U(S,1,j),l(P,Xe[t(i).quest_type]||t(i).quest_type),l(M,t(i).title||"-"),l(O,t(i).quest_date),U(V,1,W),l(Ee,Be)},[()=>`px-2 py-1 text-xs rounded border ${ve(t(i).quest_type)}`,()=>`inline-flex items-center rounded-md border px-2 py-1 text-xs font-semibold ${ce(t(i).score,t(i).is_submitted,t(i).quest_type)}`,()=>xe(t(i).score,t(i).is_submitted,t(i).quest_type)]),v(E,y)}),e(h),e(z),e(p),v(n,p)},K=n=>{var p=sr();v(n,p)};w(T,n=>{t(c).scores.length>0?n(F):n(K,!1)})}v(x,g)};w(Wt,x=>{t(k)==="quests"&&x(De)})}var Yt=s(Wt,2);{var Ie=x=>{var g=J(),T=Y(g);{var F=n=>{var p=lr();Z(p,21,()=>t(D).tasks,tt,(z,h)=>{var E=ir(),i=r(E),y=r(i),$=s(r(y));e(y);var A=s(y,2),b=r(A);Z(b,20,()=>[0,1,2],tt,(q,M)=>{var L=or();Q(O=>U(L,1,O),[()=>`text-2xl leading-none ${M<ot(t(h).total_human)?"text-amber-400":"text-gray-300"}`]),v(q,L)}),e(b);var S=s(b,2),P=r(S);e(S),e(A),e(i),e(E),Q((q,M)=>{l($,` í”„ë¡œì íŠ¸ : ${t(h).task_title??""}`),et(b,"aria-label",q),l(P,`${M??""}ì `)},[()=>`íœ´ë¨¼ ì ìˆ˜ ${ot(t(h).total_human)}ì `,()=>ot(t(h).total_human)]),v(z,E)}),e(p),v(n,p)},K=n=>{var p=dr();v(n,p)};w(T,n=>{t(D)&&t(D).tasks.length>0?n(F):n(K,!1)})}v(x,g)};w(Yt,x=>{t(k)==="rubrics"&&x(Ie)})}var Te=s(Yt,2);{var ze=x=>{var g=J(),T=Y(g);{var F=n=>{var p=vr(),z=r(p),h=s(r(z));Z(h,21,()=>t(c).bonus_scores,tt,(E,i)=>{var y=nr(),$=r(y),A=r($,!0);e($);var b=s($),S=r(b,!0);e(b);var P=s(b),q=r(P);e(P);var M=s(P),L=r(M,!0);e(M);var O=s(M),N=r(O,!0);e(O),e(y),Q(V=>{l(A,t(i).category||"-"),l(S,t(i).reason||"-"),l(q,`+${t(i).score??""}`),l(L,t(i).given_by_name),l(N,V)},[()=>pe(t(i).given_at)]),v(E,y)}),e(h),e(z),e(p),v(n,p)},K=n=>{var p=cr();v(n,p)};w(T,n=>{t(c).bonus_scores.length>0?n(F):n(K,!1)})}v(x,g)};w(Te,x=>{t(k)==="bonus"&&x(ze)})}e(Vt),e(Nt),Q(x=>{l(fe,`${t(qt)??""}Â°C`),Ht(_e,`width: ${t(qt)??""}%`),l(ye,`${t(Mt)??""}Â°C`),Ht(he,`width: ${t(Mt)??""}%`),et(Et,"stroke-dashoffset",2*Math.PI*40*(1-(t(I)>0?t(G)/t(I):0))),l(we,`${x??""}%`),l(ke,`${t(G)??""} / ${t(I)??""} ì™„ë£Œ`),l(qe,`${t(oe)??""}ê±´`),l(Me,t(c).total_score),l(Ce,t(c).total_quest_score),l(Se,`+${t(c).total_bonus_score??""}`),U(ht,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(k)==="quests"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),U(wt,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(k)==="rubrics"?"border-purple-600 text-purple-600 bg-purple-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`),U(H,1,`px-6 py-4 text-sm font-medium transition-colors border-b-2 ${t(k)==="bonus"?"border-amber-600 text-amber-600 bg-amber-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"} cursor-pointer`)},[()=>t(I)>0?Math.round(t(G)/t(I)*100):0]),v(_,B)},m=_=>{var B=pr();v(_,B)};w(d,_=>{t(c)?_(f):_(m,!1)},!0)}v(a,o)};w(me,a=>{t(at)?a(ge):a(be,!1)})}e(it),Q(()=>l(ue,t(se))),v(Zt,it),Ue(),ae()}Fe(["click"]);export{Dr as component};
